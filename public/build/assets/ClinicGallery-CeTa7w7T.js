import{d as V,r as h,a as D,e as d,w as a,i as o,h as t,u as s,j as u,b as m,g as v,t as k,F as C,k as $,p as L}from"./vue-vendor-DmxhFomr.js";import{a as O,h as z}from"./inertia-vendor-BXJnWAhq.js";import{u as J}from"./useToast-Dsd6g505.js";import{_ as K}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-BVYCrzPZ.js";import{a as X}from"./auth-a3bL7d2J.js";import{K as P,L as G,M as F,O as Y,N,a as _,R as H,S as Q}from"./ui-components-Dj0vw2vK.js";import{c as W}from"./admin-j62zy8g0.js";import{ag as Z,X as R,aw as ee}from"./lucide-vendor-BUHJwLVO.js";import"./vendor-BqPpK9Aj.js";import"./leaflet-vendor-Do2TvcFZ.js";import"./toast-vendor-DVSe2vMM.js";import"./ui-vendor-B7N-G3Ug.js";import"./utility-vendor-CjxovF-h.js";const te={class:"px-3 md:px-4 py-4 md:py-6"},se={class:"max-w-3xl mx-auto space-y-4 md:space-y-6"},oe={key:0},le={class:"text-xs md:text-sm font-semibold mb-2 md:mb-3"},ae={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-4"},re=["onClick"],ie=["src","alt"],ne=["onClick"],de={key:1},ce={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-4"},ue=["src","alt"],me=["onClick"],pe={key:2,class:"flex flex-col items-center justify-center py-8 md:py-12 border-2 border-dashed rounded-lg"},fe={key:3,class:"flex flex-col sm:flex-row gap-2 md:gap-3 pt-3 md:pt-4 border-t"},ge={class:"relative w-full h-[60vh] sm:h-[80vh] bg-black flex items-center justify-center"},he=["src"],Re=V({__name:"ClinicGallery",props:{clinicRegistration:{}},setup(A){const b=A,x=J(),I=[{title:"Clinic Gallery",href:"/clinic/settings/clinic-gallery"}],f=h(null),p=h([]),w=h(""),y=h(!1),r=O({photos:[],remove_photos:[]}),c=h(b.clinicRegistration?.gallery||[]),S=()=>{f.value?.click()},U=l=>{w.value=l,y.value=!0},j=l=>{const n=l.target.files;n&&Array.from(n).forEach(i=>{const g=new FileReader;g.onload=T=>{p.value.push(T.target?.result)},g.readAsDataURL(i),r.photos.push(i)})},B=l=>{p.value.splice(l,1),r.photos.splice(l,1)},q=l=>{r.remove_photos.push(l),c.value.splice(l,1)},E=()=>{r.post("/clinic/settings/clinic-gallery",{preserveScroll:!0,forceFormData:!0,onSuccess:l=>{x.success("Gallery updated successfully!"),p.value=[],r.reset(),f.value&&(f.value.value=""),l.props.clinicRegistration?.gallery&&(c.value=l.props.clinicRegistration.gallery)},onError:l=>{console.error("Gallery update errors:",l),l.photos?x.error(`Upload failed: ${l.photos}`):x.error("Failed to update gallery")}})},M=()=>{r.reset(),p.value=[],c.value=b.clinicRegistration?.gallery||[],f.value&&(f.value.value="")};return(l,e)=>(d(),D(W,{breadcrumbs:I},{default:a(()=>[o(s(z),{title:"Clinic Gallery"}),t("div",te,[t("div",se,[o(K,{title:"Clinic Gallery",description:"Showcase your clinic with photos"}),o(s(P),null,{default:a(()=>[o(s(G),{class:"p-4 md:p-6"},{default:a(()=>[o(s(F),{class:"text-base md:text-lg"},{default:a(()=>[...e[1]||(e[1]=[u("Photo Gallery",-1)])]),_:1}),o(s(Y),{class:"text-xs md:text-sm"},{default:a(()=>[...e[2]||(e[2]=[u(" Add photos of your clinic, facilities, and team. These will be visible to pet owners browsing your profile. ",-1)])]),_:1})]),_:1}),o(s(N),{class:"space-y-4 md:space-y-6 p-4 md:p-6"},{default:a(()=>[t("div",null,[t("input",{ref_key:"fileInput",ref:f,type:"file",multiple:"",accept:"image/*",class:"hidden",onChange:j},null,544),o(s(_),{onClick:S,type:"button",variant:"outline",class:"text-xs md:text-sm"},{default:a(()=>[o(s(Z),{class:"h-3 w-3 md:h-4 md:w-4 mr-1.5 md:mr-2"}),e[3]||(e[3]=u(" Add Photos ",-1))]),_:1}),e[4]||(e[4]=t("p",{class:"text-[10px] md:text-xs text-muted-foreground mt-1.5 md:mt-2"}," JPG, PNG or GIF. Max 10MB per image. You can upload multiple images at once. ",-1)),o(X,{message:s(r).errors.photos,class:"mt-2"},null,8,["message"])]),c.value.length>0?(d(),m("div",oe,[t("h4",le,"Current Gallery ("+k(c.value.length)+" "+k(c.value.length===1?"photo":"photos")+")",1),t("div",ae,[(d(!0),m(C,null,$(c.value,(n,i)=>(d(),m("div",{key:i,class:"relative group aspect-square rounded-lg overflow-hidden border cursor-pointer",onClick:g=>U(n)},[t("img",{src:n,alt:`Gallery photo ${i+1}`,class:"w-full h-full object-cover transition-transform group-hover:scale-105"},null,8,ie),t("button",{onClick:L(g=>q(i),["stop"]),type:"button",class:"absolute top-1 right-1 md:top-2 md:right-2 p-1 md:p-1.5 bg-destructive text-destructive-foreground rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10"},[o(s(R),{class:"h-3 w-3 md:h-4 md:w-4"})],8,ne),e[5]||(e[5]=t("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"},null,-1))],8,re))),128))])])):v("",!0),p.value.length>0?(d(),m("div",de,[e[6]||(e[6]=t("h4",{class:"text-xs md:text-sm font-semibold mb-2 md:mb-3"},"New Photos to Upload",-1)),t("div",ce,[(d(!0),m(C,null,$(p.value,(n,i)=>(d(),m("div",{key:i,class:"relative group aspect-square rounded-lg overflow-hidden border border-dashed"},[t("img",{src:n,alt:`Preview ${i+1}`,class:"w-full h-full object-cover"},null,8,ue),t("button",{onClick:g=>B(i),type:"button",class:"absolute top-1 right-1 md:top-2 md:right-2 p-1 md:p-1.5 bg-destructive text-destructive-foreground rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},[o(s(R),{class:"h-3 w-3 md:h-4 md:w-4"})],8,me)]))),128))])])):v("",!0),c.value.length===0&&p.value.length===0?(d(),m("div",pe,[o(s(ee),{class:"h-10 w-10 md:h-12 md:w-12 text-muted-foreground mb-2 md:mb-4"}),e[7]||(e[7]=t("p",{class:"text-xs md:text-sm text-muted-foreground text-center px-4"},[u(" No photos in your gallery yet."),t("br"),u(' Click "Add Photos" to get started. ')],-1))])):v("",!0),s(r).photos.length>0||s(r).remove_photos.length>0?(d(),m("div",fe,[o(s(_),{onClick:E,disabled:s(r).processing,class:"text-xs md:text-sm w-full sm:w-auto"},{default:a(()=>[...e[8]||(e[8]=[u(" Save Changes ",-1)])]),_:1},8,["disabled"]),o(s(_),{onClick:M,variant:"outline",disabled:s(r).processing,class:"text-xs md:text-sm w-full sm:w-auto"},{default:a(()=>[...e[9]||(e[9]=[u(" Cancel ",-1)])]),_:1},8,["disabled"])])):v("",!0)]),_:1})]),_:1}),o(s(P),null,{default:a(()=>[o(s(G),{class:"p-4 md:p-6"},{default:a(()=>[o(s(F),{class:"text-xs md:text-sm"},{default:a(()=>[...e[10]||(e[10]=[u("Gallery Tips",-1)])]),_:1})]),_:1}),o(s(N),{class:"p-4 md:p-6 pt-0"},{default:a(()=>[...e[11]||(e[11]=[t("ul",{class:"space-y-1.5 md:space-y-2 text-xs md:text-sm text-muted-foreground"},[t("li",null,"• Add photos of your clinic's exterior and interior"),t("li",null,"• Showcase your facilities and equipment"),t("li",null,"• Include photos of your team in action"),t("li",null,"• Use high-quality, well-lit images"),t("li",null,"• Avoid photos with sensitive patient information")],-1)])]),_:1})]),_:1})])]),o(s(H),{open:y.value,"onUpdate:open":e[0]||(e[0]=n=>y.value=n)},{default:a(()=>[o(s(Q),{class:"max-w-[95vw] sm:max-w-4xl p-0 overflow-hidden"},{default:a(()=>[t("div",ge,[t("img",{src:w.value,alt:"Photo preview",class:"max-w-full max-h-full object-contain"},null,8,he)])]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Re as default};
