import{d as Z,r as M,c as D,o as ee,b as r,e as n,i as m,u as s,w as te,h as e,g as c,j as v,q as f,s as h,F as x,k as _,t as i,v as E,p as F,n as se}from"./vue-vendor-DmxhFomr.js";import{k as oe,t as A,c as re}from"./admin-j62zy8g0.js";import{_ as ne}from"./UpgradePrompt.vue_vue_type_script_setup_true_lang-CCKfoXFr.js";import{a as q,h as le,r as U}from"./inertia-vendor-BXJnWAhq.js";import{a0 as H,x as ie,a9 as ae,X as V,aa as de,a1 as ue,ar as ce,T as me,p as pe}from"./lucide-vendor-BUHJwLVO.js";import"./vendor-BqPpK9Aj.js";import"./leaflet-vendor-Do2TvcFZ.js";import"./ui-components-Dj0vw2vK.js";import"./ui-vendor-B7N-G3Ug.js";import"./utility-vendor-CjxovF-h.js";const ge={class:"flex h-full flex-1 flex-col gap-6 rounded-xl p-6 pb-24 md:pb-6"},fe={class:"flex items-center justify-between"},be={class:"rounded-lg border bg-card"},xe={class:"p-4 border-b"},ye={class:"text-sm font-semibold flex items-center gap-2"},ve={class:"p-4"},he={class:"grid gap-4 md:grid-cols-2"},_e={class:"relative"},ke=["value"],we={key:0,class:"flex flex-wrap items-center gap-2 mt-4 pt-4 border-t"},Ce={key:0,class:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-md text-xs font-medium"},Se={key:1,class:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200 rounded-md text-xs font-medium"},Me={class:"space-y-6"},je={key:0,class:"flex items-center justify-between p-4 border-b"},$e={class:"flex items-center gap-3"},De={class:"text-2xl"},Ue={class:"text-lg font-semibold"},Ve={class:"text-sm text-muted-foreground"},Le={class:"p-4"},Ne={key:0,class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},Te={class:"flex items-start justify-between mb-3"},Ee={class:"flex-1"},Fe={class:"font-semibold text-foreground"},qe={class:"text-sm text-muted-foreground mt-1"},ze={class:"relative"},Be=["onClick"],Ae={key:0,class:"absolute right-0 top-8 w-48 bg-background border rounded-md shadow-lg z-10"},He=["onClick"],Ge=["onClick"],Oe=["onClick"],Pe={class:"space-y-2 mb-4"},Ie={class:"flex justify-between"},Xe={class:"text-sm"},Je={class:"flex justify-between"},Ke={class:"text-sm"},Qe={class:"border-t pt-3 space-y-2"},Re={class:"flex justify-between"},We={class:"text-xs font-medium"},Ye={class:"flex justify-between"},Ze={class:"text-xs"},et={key:1,class:"text-center py-8 text-muted-foreground"},tt={key:0,class:"text-center py-12"},st={class:"text-muted-foreground"},ot={key:0},rt={key:1},nt={key:0,class:"flex justify-center"},lt={class:"flex items-center gap-1"},it=["onClick","innerHTML"],at=["innerHTML"],dt={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},ut={class:"bg-background rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto"},ct={class:"flex items-center justify-between mb-4"},mt={class:"grid gap-4 md:grid-cols-2"},pt={key:0,class:"text-red-500 text-sm mt-1"},gt=["value"],ft={key:0,class:"text-red-500 text-sm mt-1"},bt={key:0,class:"text-red-500 text-sm mt-1"},xt={class:"grid gap-4 md:grid-cols-1"},yt={key:0,class:"text-red-500 text-sm mt-1"},vt={class:"flex gap-3 pt-4"},ht=["disabled"],_t={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},kt={class:"bg-background rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto"},wt={class:"flex items-center justify-between mb-4"},Ct={class:"grid gap-4 md:grid-cols-2"},St={key:0,class:"text-red-500 text-sm mt-1"},Mt=["value"],jt={key:0,class:"text-red-500 text-sm mt-1"},$t={key:0,class:"text-red-500 text-sm mt-1"},Dt={class:"grid gap-4 md:grid-cols-1"},Ut={key:0,class:"text-red-500 text-sm mt-1"},Vt={class:"flex gap-3 pt-4"},Lt=["disabled"],Nt={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Tt={class:"bg-background rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto"},It=Z({__name:"ServicesList",props:{services:{},stats:{},categories:{},filters:{},clinic:{},usage_limits:{},show_upgrade_prompt:{type:Boolean}},setup(y){const G=[{title:"Clinic Dashboard",href:oe().url},{title:"Services Management",href:A().url}],b=y,k=M(!1),w=M(!1),C=M(null),S=M(null),L=M(b.show_upgrade_prompt||!1),u=q({name:"",description:"",category:"consultation",duration_minutes:30}),a=q({name:"",description:"",category:"",duration_minutes:30}),d=q({category:b.filters.category||"all",search:b.filters.search||""}),N=D(()=>{let l=[...b.services.data];if(d.search){const t=d.search.toLowerCase();l=l.filter(o=>o.name.toLowerCase().includes(t)||o.description?.toLowerCase().includes(t)||o.category_display.toLowerCase().includes(t))}return d.category&&d.category!=="all"&&(l=l.filter(t=>t.category===d.category)),l}),z=D(()=>d.category&&d.category!=="all"&&d.category!==""),O=D(()=>{if(z.value){const l={};return N.value.forEach(t=>{l[t.category]||(l[t.category]=[]),l[t.category].push(t)}),l}else return{all:N.value}}),P=D(()=>Object.entries(b.categories).map(([l,t])=>({value:l,label:t,count:b.stats.category_stats[l]||0})).filter(l=>l.count>0)),j=()=>{U.get(A().url,{category:d.category==="all"?"":d.category,search:d.search},{preserveState:!0,preserveScroll:!0})},B=()=>{if(b.usage_limits&&!b.usage_limits.can_add){L.value=!0;return}u.reset(),k.value=!0},I=l=>{C.value=l,a.reset(),a.name=l.name,a.description=l.description,a.category=l.category,a.duration_minutes=l.duration_minutes,w.value=!0,$()},X=()=>{u.post("/clinic/services",{onSuccess:()=>{k.value=!1,u.reset()}})},J=()=>{C.value&&a.patch(`/clinic/services/${C.value.id}`,{onSuccess:()=>{w.value=!1,a.reset(),C.value=null}})},K=l=>{U.post(`/clinic/services/${l.id}/duplicate`,{},{onSuccess:()=>{$()}})},Q=l=>{confirm(`Are you sure you want to delete "${l.name}"?`)&&U.delete(`/clinic/services/${l.id}`,{onSuccess:()=>{$()}})},R=l=>{S.value=S.value===l?null:l},$=()=>{S.value=null},W=()=>{L.value=!1},Y=l=>({consultation:"ðŸ©º",vaccination:"ðŸ’‰",surgery:"ï¿½",dental:"ðŸ¦·",grooming:"âœ‚ï¸",boarding:"ðŸ ",emergency:"ï¿½",diagnostic:"ðŸ§ª",other:"âš•ï¸"})[l]||"ðŸ¥";return ee(()=>{const l=t=>{S.value!==null&&$()};return document.addEventListener("click",l),()=>{document.removeEventListener("click",l)}}),(l,t)=>(n(),r(x,null,[m(s(le),{title:"Services Management"}),m(re,{breadcrumbs:G},{default:te(()=>[e("div",ge,[e("div",fe,[t[17]||(t[17]=e("div",null,[e("h1",{class:"text-2xl font-semibold text-foreground"},"Services Management"),e("p",{class:"text-muted-foreground"},"Manage your clinic services, pricing, and availability")],-1)),e("button",{onClick:B,class:"hidden md:inline-flex items-center gap-2 bg-primary text-primary-foreground hover:bg-primary/90 px-4 py-2 rounded-md text-sm font-medium transition-colors"},[m(s(H),{class:"h-4 w-4"}),t[16]||(t[16]=v(" Add Service ",-1))])]),e("button",{onClick:B,class:"md:hidden fixed bottom-6 right-6 z-40 flex items-center justify-center w-14 h-14 bg-primary text-primary-foreground hover:bg-primary/90 rounded-full shadow-lg transition-all hover:scale-110"},[m(s(H),{class:"h-6 w-6"})]),e("div",be,[e("div",xe,[e("h3",ye,[m(s(ie),{class:"h-4 w-4"}),t[18]||(t[18]=v(" Filter Services ",-1))])]),e("div",ve,[e("div",he,[e("div",_e,[m(s(ae),{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s(d).search=o),onInput:j,type:"text",placeholder:"Search services...",class:"w-full pl-10 pr-3 py-2 border border-input bg-background rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,544),[[h,s(d).search]])]),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>s(d).category=o),onChange:j,class:"border border-input bg-background text-foreground px-3 py-2 text-sm ring-offset-background rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[t[19]||(t[19]=e("option",{value:"all",class:"bg-background text-foreground"},"All Categories",-1)),(n(!0),r(x,null,_(P.value,o=>(n(),r("option",{key:o.value,value:o.value,class:"bg-background text-foreground"},i(o.label)+" ("+i(o.count)+") ",9,ke))),128))],544),[[E,s(d).category]])]),s(d).category!=="all"||s(d).search?(n(),r("div",we,[t[20]||(t[20]=e("span",{class:"text-xs text-muted-foreground font-medium"},"Active filters:",-1)),s(d).search?(n(),r("span",Ce,[v(' Search: "'+i(s(d).search)+'" ',1),e("button",{onClick:t[2]||(t[2]=o=>{s(d).search="",j()}),class:"hover:bg-blue-200 dark:hover:bg-blue-800 rounded-full p-0.5 transition-colors"},[m(s(V),{class:"h-3 w-3"})])])):c("",!0),s(d).category!=="all"?(n(),r("span",Se,[v(" Category: "+i(y.categories[s(d).category])+" ",1),e("button",{onClick:t[3]||(t[3]=o=>{s(d).category="all",j()}),class:"hover:bg-purple-200 dark:hover:bg-purple-800 rounded-full p-0.5 transition-colors"},[m(s(V),{class:"h-3 w-3"})])])):c("",!0)])):c("",!0)])]),e("div",Me,[(n(!0),r(x,null,_(O.value,(o,p)=>(n(),r("div",{key:p,class:"rounded-lg border bg-card"},[p!=="all"?(n(),r("div",je,[e("div",$e,[e("span",De,i(Y(p)),1),e("div",null,[e("h2",Ue,i(y.categories[p]||o[0]?.category_display||p),1),e("p",Ve,i(o.length)+" service(s)",1)])])])):c("",!0),e("div",Le,[o.length>0?(n(),r("div",Ne,[(n(!0),r(x,null,_(o,g=>(n(),r("div",{key:g.id,class:"relative rounded-lg border p-4 hover:shadow-md transition-shadow"},[e("div",Te,[e("div",Ee,[e("h3",Fe,i(g.name),1),e("p",qe,i(g.description||"No description"),1)]),e("div",ze,[e("button",{onClick:F(T=>R(g.id),["stop"]),class:"p-1 hover:bg-muted rounded transition-colors"},[m(s(de),{class:"h-4 w-4"})],8,Be),S.value===g.id?(n(),r("div",Ae,[e("button",{onClick:T=>I(g),class:"flex items-center gap-2 w-full px-3 py-2 text-sm hover:bg-muted text-left"},[m(s(ue),{class:"h-4 w-4"}),t[21]||(t[21]=v(" Edit Service ",-1))],8,He),e("button",{onClick:T=>K(g),class:"flex items-center gap-2 w-full px-3 py-2 text-sm hover:bg-muted text-left"},[m(s(ce),{class:"h-4 w-4"}),t[22]||(t[22]=v(" Duplicate ",-1))],8,Ge),t[24]||(t[24]=e("hr",{class:"my-1"},null,-1)),e("button",{onClick:T=>Q(g),class:"flex items-center gap-2 w-full px-3 py-2 text-sm hover:bg-muted text-left text-red-600"},[m(s(me),{class:"h-4 w-4"}),t[23]||(t[23]=v(" Delete ",-1))],8,Oe)])):c("",!0)])]),e("div",Pe,[e("div",Ie,[t[25]||(t[25]=e("span",{class:"text-sm text-muted-foreground"},"Category:",-1)),e("span",Xe,i(g.category_display),1)]),e("div",Je,[t[26]||(t[26]=e("span",{class:"text-sm text-muted-foreground"},"Duration:",-1)),e("span",Ke,i(g.formatted_duration),1)])]),e("div",Qe,[e("div",Re,[t[27]||(t[27]=e("span",{class:"text-xs text-muted-foreground"},"Total Bookings:",-1)),e("span",We,i(g.usage.total_appointments),1)]),e("div",Ye,[t[28]||(t[28]=e("span",{class:"text-xs text-muted-foreground"},"Last Used:",-1)),e("span",Ze,i(g.usage.formatted_last_used),1)])])]))),128))])):(n(),r("div",et,[e("p",null,"No services found"+i(z.value?" in this category":""),1)]))])]))),128)),N.value.length===0?(n(),r("div",tt,[e("div",st,[m(s(pe),{class:"h-12 w-12 mx-auto mb-4 opacity-50"}),t[29]||(t[29]=e("p",{class:"text-lg font-medium mb-2"},"No services found",-1)),s(d).search||s(d).category!=="all"?(n(),r("p",ot," Try adjusting your filters ")):(n(),r("p",rt," Get started by creating your first service "))])])):c("",!0)]),y.services.links.length>3?(n(),r("div",nt,[e("nav",lt,[(n(!0),r(x,null,_(y.services.links,o=>(n(),r(x,{key:o.label},[o.url?(n(),r("button",{key:0,onClick:p=>s(U).get(o.url),innerHTML:o.label,class:se(["px-3 py-1 text-sm rounded transition-colors",{"bg-primary text-primary-foreground":o.active,"hover:bg-muted":!o.active}])},null,10,it)):(n(),r("span",{key:1,innerHTML:o.label,class:"px-3 py-1 text-sm text-muted-foreground"},null,8,at))],64))),128))])])):c("",!0)]),k.value?(n(),r("div",dt,[e("div",ut,[e("div",ct,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold"},"Create New Service",-1)),e("button",{onClick:t[4]||(t[4]=o=>k.value=!1),class:"p-1 hover:bg-muted rounded"},[m(s(V),{class:"h-5 w-5"})])]),e("form",{onSubmit:F(X,["prevent"]),class:"space-y-4"},[e("div",mt,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium mb-1"},"Service Name *",-1)),f(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s(u).name=o),type:"text",required:"",class:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"e.g., General Consultation"},null,512),[[h,s(u).name]]),s(u).errors.name?(n(),r("div",pt,i(s(u).errors.name),1)):c("",!0)]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium mb-1"},"Category *",-1)),f(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s(u).category=o),required:"",class:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary bg-background text-foreground"},[t[32]||(t[32]=e("option",{value:"",class:"bg-background text-foreground"},"Select category",-1)),(n(!0),r(x,null,_(y.categories,(o,p)=>(n(),r("option",{key:p,value:p,class:"bg-background text-foreground"},i(o),9,gt))),128))],512),[[E,s(u).category]]),s(u).errors.category?(n(),r("div",ft,i(s(u).errors.category),1)):c("",!0)])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium mb-1"},"Description",-1)),f(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=o=>s(u).description=o),rows:"3",class:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Describe what this service includes..."},null,512),[[h,s(u).description]]),s(u).errors.description?(n(),r("div",bt,i(s(u).errors.description),1)):c("",!0)]),e("div",xt,[e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium mb-1"},"Duration (minutes)",-1)),f(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s(u).duration_minutes=o),type:"number",min:"1",max:"1440",class:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[h,s(u).duration_minutes,void 0,{number:!0}]]),s(u).errors.duration_minutes?(n(),r("div",yt,i(s(u).errors.duration_minutes),1)):c("",!0)])]),e("div",vt,[e("button",{type:"submit",disabled:s(u).processing,class:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 px-4 py-2 rounded-md font-medium transition-colors"},i(s(u).processing?"Creating...":"Create Service"),9,ht),e("button",{type:"button",onClick:t[9]||(t[9]=o=>k.value=!1),class:"px-4 py-2 border rounded-md hover:bg-muted transition-colors"}," Cancel ")])],32)])])):c("",!0),w.value&&C.value?(n(),r("div",_t,[e("div",kt,[e("div",wt,[t[36]||(t[36]=e("h2",{class:"text-xl font-semibold"},"Edit Service",-1)),e("button",{onClick:t[10]||(t[10]=o=>w.value=!1),class:"p-1 hover:bg-muted rounded"},[m(s(V),{class:"h-5 w-5"})])]),e("form",{onSubmit:F(J,["prevent"]),class:"space-y-4"},[e("div",Ct,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium mb-1"},"Service Name *",-1)),f(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s(a).name=o),type:"text",required:"",class:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[h,s(a).name]]),s(a).errors.name?(n(),r("div",St,i(s(a).errors.name),1)):c("",!0)]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium mb-1"},"Category *",-1)),f(e("select",{"onUpdate:modelValue":t[12]||(t[12]=o=>s(a).category=o),required:"",class:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary bg-background text-foreground"},[(n(!0),r(x,null,_(y.categories,(o,p)=>(n(),r("option",{key:p,value:p,class:"bg-background text-foreground"},i(o),9,Mt))),128))],512),[[E,s(a).category]]),s(a).errors.category?(n(),r("div",jt,i(s(a).errors.category),1)):c("",!0)])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium mb-1"},"Description",-1)),f(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=o=>s(a).description=o),rows:"3",class:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[h,s(a).description]]),s(a).errors.description?(n(),r("div",$t,i(s(a).errors.description),1)):c("",!0)]),e("div",Dt,[e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium mb-1"},"Duration (minutes)",-1)),f(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>s(a).duration_minutes=o),type:"number",min:"1",max:"1440",class:"w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[h,s(a).duration_minutes,void 0,{number:!0}]]),s(a).errors.duration_minutes?(n(),r("div",Ut,i(s(a).errors.duration_minutes),1)):c("",!0)])]),e("div",Vt,[e("button",{type:"submit",disabled:s(a).processing,class:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 px-4 py-2 rounded-md font-medium transition-colors"},i(s(a).processing?"Updating...":"Update Service"),9,Lt),e("button",{type:"button",onClick:t[15]||(t[15]=o=>w.value=!1),class:"px-4 py-2 border rounded-md hover:bg-muted transition-colors"}," Cancel ")])],32)])])):c("",!0),L.value?(n(),r("div",Nt,[e("div",Tt,[m(ne,{feature:"Add More Services","required-plan":"professional","is-modal":"",onClose:W})])])):c("",!0)]),_:1})],64))}});export{It as default};
