import{d as E,c as T,r as g,b as a,e as l,i as x,u as _,w as I,h as t,j as $,q as k,g as d,s as O,F as L,k as j,t as r,v as D,n as c,p as Q}from"./vue-vendor-DmxhFomr.js";import{B as C,c as W,C as J,D as K}from"./admin-j62zy8g0.js";import{h as X,r as f}from"./inertia-vendor-BXJnWAhq.js";import{x as Z,a9 as ee,a8 as te}from"./lucide-vendor-BUHJwLVO.js";import"./vendor-BqPpK9Aj.js";import"./leaflet-vendor-Do2TvcFZ.js";import"./ui-components-Dj0vw2vK.js";import"./ui-vendor-B7N-G3Ug.js";import"./utility-vendor-CjxovF-h.js";const se={class:"flex h-full flex-1 flex-col gap-4 sm:gap-6 rounded-xl p-3 sm:p-4 md:p-6"},oe={class:"rounded-lg border bg-card"},re={class:"p-3 sm:p-4 border-b"},ne={class:"text-xs sm:text-sm font-semibold flex items-center gap-2"},ae={class:"p-3 sm:p-4"},le={class:"grid gap-3 sm:gap-4 md:grid-cols-3"},ie={class:"relative"},de=["placeholder"],ue=["value"],ce={key:1},me={class:"rounded-lg border bg-card"},pe={class:"p-3 sm:p-4 md:p-6"},ge={class:"mb-4 sm:mb-6"},xe={class:"flex items-center gap-1.5 sm:gap-2 bg-muted rounded-lg p-1 overflow-x-auto scrollbar-hide"},fe={key:0,class:"mb-4 sm:mb-6"},he={class:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-2 sm:gap-3 p-2 sm:p-3 bg-muted/30 rounded-lg border"},ye={class:"flex items-center gap-2"},be={class:"text-xs sm:text-sm text-muted-foreground whitespace-nowrap"},ve={class:"flex items-center justify-between sm:justify-start gap-2"},we=["disabled"],_e={class:"text-xs sm:text-sm text-muted-foreground whitespace-nowrap"},ke=["disabled"],Ce={class:"space-y-2 sm:space-y-3"},Se=["onClick"],Te={class:"flex items-start justify-between gap-2 sm:gap-4"},Le={class:"flex-1 min-w-0"},De={class:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3 flex-wrap"},Ue={class:"font-semibold text-sm sm:text-base text-foreground truncate"},Ne={class:"grid gap-2 sm:gap-3 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 text-xs sm:text-sm"},Ae={key:0},Pe={class:"text-foreground font-medium text-xs sm:text-sm"},Ve={key:1},$e={class:"text-foreground font-medium text-xs sm:text-sm"},je={class:"text-foreground font-medium text-xs sm:text-sm"},Be={key:2},Me={class:"text-foreground font-medium text-xs sm:text-sm"},Fe={key:0,class:"flex flex-col gap-2 flex-shrink-0"},He=["onClick"],Re={key:0,class:"text-center py-8 sm:py-12"},Ye={class:"text-sm sm:text-base text-muted-foreground font-medium mb-1"},Ge={class:"text-xs sm:text-sm text-muted-foreground"},Xe=E({__name:"History",props:{appointments:{default:()=>({data:[],current_page:1,last_page:1,per_page:10,total:0,from:0,to:0})},userPets:{default:()=>[]},filters:{default:()=>({date_filter:"last_6_months"})},userType:{default:"user"}},setup(i){const n=i,B=T(()=>n.userType==="clinic"?[{title:"Clinic Dashboard",href:"/clinic/dashboard"},{title:"History",href:"/clinic/history"}]:[{title:"History",href:C().url}]),h=g(n.filters.pet_id||""),y=g(n.filters.date_filter||"last_6_months"),U=g(n.filters.category||"all"),b=g(n.filters.date_range||"all"),m=g(n.filters.category||"all"),p=g(n.filters.search||""),S=T(()=>{let s=n.appointments.data.filter(e=>["completed","cancelled","no_show"].includes(e.status));if(m.value!=="all"&&(s=s.filter(e=>e.status===m.value)),p.value.trim()){const e=p.value.toLowerCase();s=s.filter(o=>o.pet?.name.toLowerCase().includes(e)||o.clinic?.name.toLowerCase().includes(e)||o.type.toLowerCase().includes(e)||o.appointment_number.toLowerCase().includes(e))}return s}),u=T(()=>{const s=n.appointments.data.filter(e=>["completed","cancelled","no_show"].includes(e.status));return{all:s.length,completed:s.filter(e=>e.status==="completed").length,cancelled:s.filter(e=>e.status==="cancelled").length,no_show:s.filter(e=>e.status==="no_show").length}}),N=s=>{const e=new Date(s);return{date:e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),time:e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}},A=s=>{switch(s){case"completed":return{text:"Completed",class:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"};case"scheduled":return{text:"Scheduled",class:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"};case"cancelled":return{text:"Cancelled",class:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};case"no_show":return{text:"No Show",class:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};default:return{text:"Unknown",class:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}}},M=s=>{switch(s){case"consultation":return"Consultation";case"vaccination":return"Vaccination";case"surgery":return"Surgery";case"emergency":return"Emergency";case"follow_up":return"Follow-up";case"grooming":return"Grooming";default:return s.charAt(0).toUpperCase()+s.slice(1)}},F=s=>s?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s):"$0.00",H=s=>A(s).class,R=s=>{switch(s){case"completed":return"bg-green-50 dark:bg-green-900/20";case"cancelled":return"bg-red-50 dark:bg-red-900/20";default:return"bg-gray-50 dark:bg-gray-700"}},P=s=>{switch(s){case"completed":return"text-green-700 dark:text-green-300";case"cancelled":return"text-red-700 dark:text-red-300";default:return"text-gray-700 dark:text-gray-300"}},v=()=>{const s=new URLSearchParams;n.userType==="clinic"?(U.value!=="all"&&s.append("category",U.value),b.value!=="all"&&s.append("date_range",b.value),p.value.trim()&&s.append("search",p.value.trim())):(h.value&&s.append("pet_id",h.value.toString()),y.value!=="last_6_months"&&s.append("date_filter",y.value));const e=C().url+(s.toString()?`?${s.toString()}`:"");f.visit(e)},Y=()=>{if(n.appointments.current_page>1){const s=new URLSearchParams(window.location.search);s.set("page",(n.appointments.current_page-1).toString());const e=C().url+`?${s.toString()}`;f.visit(e)}},G=()=>{if(n.appointments.current_page<n.appointments.last_page){const s=new URLSearchParams(window.location.search);s.set("page",(n.appointments.current_page+1).toString());const e=C().url+`?${s.toString()}`;f.visit(e)}},w=s=>{m.value=s},V=s=>{if(console.log("Navigating to appointment details for ID:",s),console.log("User type:",n.userType),n.userType==="clinic"){const e=J(s).url;console.log("Generated clinic URL:",e),f.visit(e)}else{const e=K(s).url;console.log("Generated user URL:",e),f.visit(e)}},q=s=>{V(s.id)};return(s,e)=>(l(),a(L,null,[x(_(X),{title:"Booking History"}),x(W,{breadcrumbs:B.value},{default:I(()=>[t("div",se,[e[18]||(e[18]=t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h1",{class:"text-xl sm:text-2xl font-semibold text-foreground"},"Booking History"),t("p",{class:"text-xs sm:text-sm text-muted-foreground"}," View your past appointments and booking history ")])],-1)),t("div",oe,[t("div",re,[t("h3",ne,[x(_(Z),{class:"h-4 w-4"}),e[8]||(e[8]=$(" Filter History ",-1))])]),t("div",ae,[t("div",le,[t("div",ie,[x(_(ee),{class:"absolute left-2 sm:left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 sm:h-4 sm:w-4 text-muted-foreground"}),k(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o),onInput:v,placeholder:i.userType==="clinic"?"Search by pet, owner, appointment #...":"Search by pet, clinic, service...",class:"w-full pl-8 sm:pl-10 pr-2 sm:pr-3 py-2 border border-input bg-background rounded-md text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},null,40,de),[[O,p.value]])]),i.userType==="user"?k((l(),a("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>h.value=o),onChange:v,class:"border border-input bg-background px-2 sm:px-3 py-2 text-xs sm:text-sm ring-offset-background rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[e[9]||(e[9]=t("option",{value:""},"All Pets",-1)),(l(!0),a(L,null,j(i.userPets,o=>(l(),a("option",{key:o.id,value:o.id},r(o.name),9,ue))),128))],544)),[[D,h.value]]):d("",!0),i.userType==="clinic"?(l(),a("div",ce)):d("",!0),i.userType==="user"?k((l(),a("select",{key:2,"onUpdate:modelValue":e[2]||(e[2]=o=>y.value=o),onChange:v,class:"border border-input bg-background px-2 sm:px-3 py-2 text-xs sm:text-sm ring-offset-background rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[...e[10]||(e[10]=[t("option",{value:"last_month"},"Last Month",-1),t("option",{value:"last_3_months"},"Last 3 Months",-1),t("option",{value:"last_6_months"},"Last 6 Months",-1),t("option",{value:"last_year"},"Last Year",-1),t("option",{value:"all_time"},"All Time",-1)])],544)),[[D,y.value]]):d("",!0),i.userType==="clinic"?k((l(),a("select",{key:3,"onUpdate:modelValue":e[3]||(e[3]=o=>b.value=o),onChange:v,class:"border border-input bg-background px-2 sm:px-3 py-2 text-xs sm:text-sm ring-offset-background rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},[...e[11]||(e[11]=[t("option",{value:"all"},"All Time",-1),t("option",{value:"today"},"Today",-1),t("option",{value:"this_week"},"This Week",-1),t("option",{value:"this_month"},"This Month",-1),t("option",{value:"last_month"},"Last Month",-1),t("option",{value:"this_year"},"This Year",-1),t("option",{value:"last_year"},"Last Year",-1)])],544)),[[D,b.value]]):d("",!0)])])]),t("div",me,[t("div",pe,[t("div",ge,[t("div",xe,[t("button",{onClick:e[4]||(e[4]=o=>w("all")),class:c(["px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap flex-shrink-0",m.value==="all"?"bg-background shadow-sm":"text-muted-foreground hover:text-foreground"])}," All ("+r(u.value.all)+") ",3),t("button",{onClick:e[5]||(e[5]=o=>w("completed")),class:c(["px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap flex-shrink-0",m.value==="completed"?"bg-background shadow-sm":"text-muted-foreground hover:text-foreground"])}," Completed ("+r(u.value.completed)+") ",3),t("button",{onClick:e[6]||(e[6]=o=>w("cancelled")),class:c(["px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap flex-shrink-0",m.value==="cancelled"?"bg-background shadow-sm":"text-muted-foreground hover:text-foreground"])}," Cancelled ("+r(u.value.cancelled)+") ",3),t("button",{onClick:e[7]||(e[7]=o=>w("no_show")),class:c(["px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-xs sm:text-sm font-medium transition-colors whitespace-nowrap flex-shrink-0",m.value==="no_show"?"bg-background shadow-sm":"text-muted-foreground hover:text-foreground"])}," No Show ("+r(u.value.no_show)+") ",3)])]),u.value.all>0?(l(),a("div",fe,[t("div",he,[t("div",ye,[t("span",be," Showing "+r(S.value.length)+" of "+r(u.value.all)+" appointments ",1)]),t("div",ve,[t("button",{onClick:Y,disabled:i.appointments.current_page===1,class:"flex-1 sm:flex-none px-2 sm:px-3 py-1.5 sm:py-1 border rounded-md hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm font-medium"}," Previous ",8,we),t("span",_e," Page "+r(i.appointments.current_page)+" of "+r(i.appointments.last_page),1),t("button",{onClick:G,disabled:i.appointments.current_page===i.appointments.last_page,class:"flex-1 sm:flex-none px-2 sm:px-3 py-1.5 sm:py-1 border rounded-md hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed text-xs sm:text-sm font-medium"}," Next ",8,ke)])])])):d("",!0),t("div",Ce,[(l(!0),a(L,null,j(S.value,o=>(l(),a("div",{key:o.id,onClick:z=>V(o.id),class:"border rounded-lg p-3 sm:p-4 hover:bg-muted/50 transition-all cursor-pointer group"},[t("div",Te,[t("div",Le,[t("div",De,[t("h4",Ue,r(o.pet?.name)+" - "+r(M(o.type)),1),t("span",{class:c(["px-2 sm:px-2.5 py-0.5 sm:py-1 text-[10px] sm:text-xs font-medium rounded-full whitespace-nowrap",H(o.status)])},r(A(o.status).text),3)]),t("div",Ne,[i.userType==="clinic"&&o.owner?(l(),a("div",Ae,[e[12]||(e[12]=t("p",{class:"text-muted-foreground text-[10px] sm:text-xs mb-1"},"Pet Owner",-1)),t("p",Pe,r(o.owner.name),1)])):(l(),a("div",Ve,[e[13]||(e[13]=t("p",{class:"text-muted-foreground text-[10px] sm:text-xs mb-1"},"Clinic",-1)),t("p",$e,r(o.clinic?.name),1)])),t("div",null,[e[14]||(e[14]=t("p",{class:"text-muted-foreground text-[10px] sm:text-xs mb-1"},"Date & Time",-1)),t("p",je,r(N(o.scheduled_at).date)+" â€¢ "+r(N(o.scheduled_at).time),1)]),o.actual_cost||o.estimated_cost?(l(),a("div",Be,[e[15]||(e[15]=t("p",{class:"text-muted-foreground text-[10px] sm:text-xs mb-1"},"Cost",-1)),t("p",Me,r(F(o.actual_cost||o.estimated_cost)),1)])):d("",!0)]),o.notes?(l(),a("div",{key:0,class:c(["mt-2 sm:mt-3 p-2 sm:p-3 rounded-md",R(o.status)])},[t("p",{class:c(["text-[10px] sm:text-xs font-medium mb-1",P(o.status)])},"Notes",2),t("p",{class:c(["text-xs sm:text-sm",P(o.status)])},r(o.notes),3)],2)):d("",!0)]),i.userType==="user"&&o.status==="completed"?(l(),a("div",Fe,[t("button",{onClick:Q(z=>q(o),["stop"]),class:"px-2 sm:px-3 py-1 sm:py-1.5 bg-primary hover:bg-primary/90 text-primary-foreground text-[10px] sm:text-xs font-medium rounded-md transition-colors whitespace-nowrap flex items-center gap-1"},[x(_(te),{class:"h-2.5 w-2.5 sm:h-3 sm:w-3"}),e[16]||(e[16]=$(" Rate ",-1))],8,He)])):d("",!0)])],8,Se))),128)),S.value.length===0?(l(),a("div",Re,[e[17]||(e[17]=t("div",{class:"mx-auto w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-muted flex items-center justify-center mb-3 sm:mb-4"},[t("svg",{class:"w-6 h-6 sm:w-8 sm:h-8 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t("p",Ye,r(u.value.all===0?"No appointment history found":"No appointments match your filters"),1),t("p",Ge,r(u.value.all===0?"Your booking history will appear here":"Try adjusting your search or filters"),1)])):d("",!0)])])])])]),_:1},8,["breadcrumbs"])],64))}});export{Xe as default};
