import{d as B,c as S,b as o,e as n,x as V,i as s,u as t,D as P,r as z,w as l,h as e,q as E,v as O,j as m,n as h,t as u,a as y,l as U,g as q,F as k,k as A}from"./vue-vendor-DmxhFomr.js";import{c as G}from"./admin-j62zy8g0.js";import{h as K,r as H}from"./inertia-vendor-BXJnWAhq.js";import{_ as I}from"./LineChart.vue_vue_type_script_setup_true_lang-BzlUQftE.js";import{C as J,A as Q,d as W,e as X}from"./vendor-BqPpK9Aj.js";import{K as f,L as c,M as p,N as b,O as L,t as Y}from"./ui-components-Dj0vw2vK.js";import{a8 as C,ak as N,al as Z,am as tt,an as et}from"./lucide-vendor-BUHJwLVO.js";import"./utility-vendor-CjxovF-h.js";import"./leaflet-vendor-Do2TvcFZ.js";import"./ui-vendor-B7N-G3Ug.js";const st=B({__name:"DoughnutChart",props:{data:{},title:{default:"Doughnut Chart"},height:{default:300},showLegend:{type:Boolean,default:!0}},setup(r){J.register(Q,W,X);const _=r,g=S(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:_.showLegend,position:"bottom",labels:{padding:20,usePointStyle:!0}},title:{display:!!_.title,text:_.title,font:{size:16,weight:"bold"},padding:{bottom:20}},tooltip:{callbacks:{label:function(x){const v=x.label||"",w=x.parsed,R=x.dataset.data.reduce(($,j)=>$+j,0),D=(w/R*100).toFixed(1);return`${v}: ${w.toLocaleString()} (${D}%)`}}}},cutout:"60%"}));return(x,v)=>(n(),o("div",{style:V({height:`${r.height}px`})},[s(t(P),{data:r.data,options:g.value},null,8,["data","options"])],4))}}),at={class:"flex h-full flex-1 flex-col gap-2 md:gap-4 overflow-x-auto p-2 md:p-4"},lt={class:"flex flex-col gap-2 md:gap-4 sm:flex-row sm:items-center sm:justify-between"},dt={class:"grid gap-2 md:gap-4 grid-cols-3 md:grid-cols-3"},rt={class:"text-base md:text-2xl font-bold"},nt={class:"text-base md:text-2xl font-bold text-green-600 dark:text-green-400"},it={class:"grid gap-3 md:gap-6 lg:grid-cols-2"},ot={key:1,class:"flex items-center justify-center h-[200px] text-muted-foreground"},mt={class:"text-center"},ut={class:"flex flex-col sm:flex-row items-center gap-3 md:gap-6"},xt={class:"flex-1 w-full"},gt={key:1,class:"flex items-center justify-center h-[180px] text-muted-foreground text-xs md:text-sm"},ft={key:0,class:"flex sm:flex-col gap-2 sm:gap-2 flex-wrap sm:flex-nowrap min-w-[100px] justify-center"},ct={class:"text-[10px] md:text-sm font-medium"},pt={key:0,class:"space-y-2 md:space-y-4"},bt={class:"flex items-start justify-between mb-1.5 md:mb-3"},_t={class:"flex-1"},vt={class:"flex items-center gap-1.5 md:gap-3 mb-1 md:mb-2"},wt={class:"font-semibold text-xs md:text-sm"},ht={class:"text-[10px] md:text-sm font-bold"},yt={class:"flex gap-0.5 mb-1 md:mb-2"},kt={class:"text-[9px] md:text-xs text-muted-foreground"},Ct={class:"text-[10px] md:text-sm text-muted-foreground mb-1.5 md:mb-3"},Rt={key:1,class:"flex flex-col items-center justify-center h-40 md:h-64 text-muted-foreground"},Mt=B({__name:"ClinicReviews",props:{review_trends:{default:()=>[]},rating_distribution:{default:()=>[]},recent_reviews:{default:()=>[]},review_stats:{default:()=>({total_reviews:0,average_rating:0,rating_trend:0,five_star_count:0,one_star_count:0})},date_range:{default:()=>({period:"30"})}},setup(r){const _=[{title:"Clinic Dashboard",href:"#"},{title:"Clinic Reviews",href:"#"}],g=r,x=z(g.date_range?.period||"30"),v=()=>{H.get("/clinic/reports/reviews",{date_range:x.value},{preserveState:!0,replace:!0})},w=d=>d>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",R=d=>d>=4.5?"text-green-600 dark:text-green-400":d>=3.5?"text-blue-600 dark:text-blue-400":d>=2.5?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",D=d=>d>=4?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":d>=3?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":d>=2?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",$=S(()=>({labels:g.review_trends.map(d=>d.period),datasets:[{label:"Average Rating",data:g.review_trends.map(d=>d.average_rating),borderColor:"rgb(251, 191, 36)",backgroundColor:"rgba(251, 191, 36, 0.1)",tension:.4,fill:!0}]})),j=S(()=>({labels:g.rating_distribution.map(d=>`${d.rating}★`),datasets:[{data:g.rating_distribution.map(d=>d.count),backgroundColor:["rgb(34, 197, 94)","rgb(59, 130, 246)","rgb(251, 191, 36)","rgb(245, 158, 11)","rgb(239, 68, 68)"]}]})),T=d=>Array.from({length:5},(a,i)=>i<Math.floor(d));return(d,a)=>(n(),o(k,null,[s(t(K),{title:"Clinic Reviews"}),s(G,{breadcrumbs:_},{default:l(()=>[e("div",at,[e("div",lt,[a[2]||(a[2]=e("div",null,[e("h1",{class:"text-xl md:text-3xl font-bold tracking-tight"},"Clinic Reviews"),e("p",{class:"text-muted-foreground mt-0.5 md:mt-1 text-xs md:text-sm"},"Patient feedback and ratings")],-1)),E(e("select",{"onUpdate:modelValue":a[0]||(a[0]=i=>x.value=i),onChange:v,class:"px-2 md:px-4 py-1.5 md:py-2 border rounded-lg bg-white dark:bg-slate-900 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-primary w-full sm:w-fit text-xs md:text-sm"},[...a[1]||(a[1]=[e("option",{value:"1"},"Last 24 hours",-1),e("option",{value:"7"},"Last 7 days",-1),e("option",{value:"30"},"Last 30 days",-1),e("option",{value:"90"},"Last 3 months",-1),e("option",{value:"365"},"Last year",-1),e("option",{value:"all"},"All Time",-1)])],544),[[O,x.value]])]),e("div",dt,[s(t(f),null,{default:l(()=>[s(t(c),{class:"flex flex-row items-center justify-between pb-0 p-2.5 md:p-4"},{default:l(()=>[s(t(p),{class:"text-xs md:text-sm font-medium"},{default:l(()=>[...a[3]||(a[3]=[m("Avg Rating",-1)])]),_:1}),s(t(C),{class:"hidden md:block h-5 w-5 fill-yellow-400 text-yellow-400"})]),_:1}),s(t(b),{class:"p-2.5 pt-0 md:p-4 md:pt-0"},{default:l(()=>[e("div",{class:h(["text-base md:text-2xl font-bold",R(r.review_stats.average_rating)])},u(r.review_stats.average_rating.toFixed(1)),3),a[4]||(a[4]=e("p",{class:"text-[10px] md:text-xs text-muted-foreground mt-0.5"},"Out of 5.0",-1))]),_:1})]),_:1}),s(t(f),null,{default:l(()=>[s(t(c),{class:"flex flex-row items-center justify-between pb-0 p-2.5 md:p-4"},{default:l(()=>[s(t(p),{class:"text-xs md:text-sm font-medium"},{default:l(()=>[...a[5]||(a[5]=[m("Total Reviews",-1)])]),_:1}),s(t(N),{class:"hidden md:block h-5 w-5 text-blue-600"})]),_:1}),s(t(b),{class:"p-2.5 pt-0 md:p-4 md:pt-0"},{default:l(()=>[e("div",rt,u(r.review_stats.total_reviews),1),e("div",{class:h(["flex items-center gap-0.5 text-[10px] md:text-xs mt-0.5",w(r.review_stats.rating_trend)])},[(n(),y(U(r.review_stats.rating_trend>=0?t(Z):t(tt)),{class:"h-2.5 w-2.5 md:h-3 md:w-3"})),e("span",null,u(Math.abs(r.review_stats.rating_trend).toFixed(1))+"%",1)],2)]),_:1})]),_:1}),s(t(f),null,{default:l(()=>[s(t(c),{class:"flex flex-row items-center justify-between pb-0 p-2.5 md:p-4"},{default:l(()=>[s(t(p),{class:"text-xs md:text-sm font-medium"},{default:l(()=>[...a[6]||(a[6]=[m("5-Star Reviews",-1)])]),_:1}),s(t(et),{class:"hidden md:block h-5 w-5 text-green-600"})]),_:1}),s(t(b),{class:"p-2.5 pt-0 md:p-4 md:pt-0"},{default:l(()=>[e("div",nt,u(r.review_stats.five_star_count),1),a[7]||(a[7]=e("p",{class:"text-[10px] md:text-xs text-muted-foreground mt-0.5"},"Excellent ratings",-1))]),_:1})]),_:1})]),e("div",it,[s(t(f),null,{default:l(()=>[s(t(c),{class:"p-3 md:p-6"},{default:l(()=>[s(t(p),{class:"text-sm md:text-base"},{default:l(()=>[...a[8]||(a[8]=[m("Rating Trend",-1)])]),_:1}),s(t(L),{class:"text-[10px] md:text-sm"},{default:l(()=>[...a[9]||(a[9]=[m("Average rating over time",-1)])]),_:1})]),_:1}),s(t(b),{class:"p-3 md:p-6 pt-0"},{default:l(()=>[r.review_trends.length>0?(n(),y(I,{key:0,data:$.value,height:200,title:""},null,8,["data"])):(n(),o("div",ot,[e("div",mt,[s(t(C),{class:"h-8 w-8 md:h-12 md:w-12 mx-auto mb-2 md:mb-3 opacity-30"}),a[10]||(a[10]=e("p",{class:"text-xs md:text-sm"},"No rating trend data available",-1))])]))]),_:1})]),_:1}),s(t(f),null,{default:l(()=>[s(t(c),{class:"p-3 md:p-6"},{default:l(()=>[s(t(p),{class:"text-sm md:text-base"},{default:l(()=>[...a[11]||(a[11]=[m("Rating Distribution",-1)])]),_:1}),s(t(L),{class:"text-[10px] md:text-sm"},{default:l(()=>[...a[12]||(a[12]=[m("Breakdown by star rating",-1)])]),_:1})]),_:1}),s(t(b),{class:"p-3 md:p-6 pt-0"},{default:l(()=>[e("div",ut,[e("div",xt,[r.rating_distribution.length>0?(n(),y(st,{key:0,data:j.value,height:180,title:""},null,8,["data"])):(n(),o("div",gt," No distribution data "))]),r.rating_distribution.length>0?(n(),o("div",ft,[(n(!0),o(k,null,A(r.rating_distribution,i=>(n(),o("div",{key:i.rating,class:"flex items-center justify-between gap-2 md:gap-3"},[e("span",ct,u(i.rating)+"★",1),s(t(Y),{variant:"secondary",class:"text-[10px] md:text-xs"},{default:l(()=>[m(u(i.count),1)]),_:2},1024)]))),128))])):q("",!0)])]),_:1})]),_:1})]),s(t(f),null,{default:l(()=>[s(t(c),{class:"p-3 md:p-6"},{default:l(()=>[s(t(p),{class:"text-sm md:text-base"},{default:l(()=>[...a[13]||(a[13]=[m("Recent Patient Reviews",-1)])]),_:1}),s(t(L),{class:"text-[10px] md:text-sm"},{default:l(()=>[...a[14]||(a[14]=[m("Latest feedback from your patients",-1)])]),_:1})]),_:1}),s(t(b),{class:"p-3 md:p-6 pt-0"},{default:l(()=>[r.recent_reviews.length>0?(n(),o("div",pt,[(n(!0),o(k,null,A(r.recent_reviews,i=>(n(),o("div",{key:i.id,class:"p-2 md:p-4 border rounded-lg hover:bg-muted/50 transition-colors"},[e("div",bt,[e("div",_t,[e("div",vt,[e("h4",wt,u(i.patient_name),1),e("div",{class:h(["flex items-center gap-0.5 md:gap-1 px-1.5 md:px-2 py-0.5 md:py-1 rounded-full",D(i.rating)])},[s(t(C),{class:"h-2 w-2 md:h-3 md:w-3 fill-current"}),e("span",ht,u(i.rating),1)],2)]),e("div",yt,[(n(!0),o(k,null,A(T(i.rating),(F,M)=>(n(),y(t(C),{key:M,class:h(["h-2.5 w-2.5 md:h-4 md:w-4",F?"fill-yellow-400 text-yellow-400":"text-gray-300 dark:text-gray-600"])},null,8,["class"]))),128))])]),e("span",kt,u(i.date),1)]),e("p",Ct,u(i.comment),1)]))),128))])):(n(),o("div",Rt,[s(t(N),{class:"h-10 w-10 md:h-16 md:w-16 mb-2 md:mb-4 opacity-30"}),a[15]||(a[15]=e("p",{class:"text-sm md:text-lg font-medium"},"No reviews yet",-1)),a[16]||(a[16]=e("p",{class:"text-xs md:text-sm"},"Patient reviews will appear here",-1))]))]),_:1})]),_:1})])]),_:1})],64))}});export{Mt as default};
