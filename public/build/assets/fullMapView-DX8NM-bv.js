import{d as S,c as h,a as H,e as r,n as A,l as Q,r as m,o as X,m as Y,b as n,i as p,h as e,u as f,g as d,w as Z,t as i,q as z,v as D,N as V,j as J,F as K}from"./vue-vendor-DmxhFomr.js";import{M as P}from"./map-e4zgbuYL.js";import{i as ee,z as te,M as oe,y as se}from"./admin-j62zy8g0.js";import{aM as ae,x as re,X as C}from"./lucide-vendor-BUHJwLVO.js";import{h as le,r as k}from"./inertia-vendor-BXJnWAhq.js";import{_ as ne}from"./auth-a3bL7d2J.js";import"./vendor-BqPpK9Aj.js";import"./leaflet-vendor-Do2TvcFZ.js";import"./ui-components-Dj0vw2vK.js";import"./ui-vendor-B7N-G3Ug.js";import"./utility-vendor-CjxovF-h.js";const N=S({__name:"Icon",props:{name:{},class:{default:""},size:{default:16},color:{},strokeWidth:{default:2}},setup(g){const l=g,x=h(()=>ee("h-4 w-4",l.class)),w=h(()=>{const s=l.name.charAt(0).toUpperCase()+l.name.slice(1);return ae[s]});return(s,u)=>(r(),H(Q(w.value),{class:A(x.value),size:g.size,"stroke-width":g.strokeWidth,color:g.color},null,8,["class","size","stroke-width","color"]))}}),ie={class:"fixed inset-0 bg-background z-50"},de={class:"relative w-full h-full"},ue={key:0,class:"absolute bottom-4 left-4 bg-card border border-border rounded-lg shadow-lg p-3 text-xs z-[9999]"},ce={key:0,class:"absolute top-4 left-4 right-4 z-[9999]"},ve={class:"flex flex-col sm:flex-row justify-between items-start gap-3"},me={class:"bg-card border border-border rounded-lg shadow-lg p-3 sm:p-4 max-w-md w-full sm:w-auto"},pe={class:"text-xs sm:text-sm text-muted-foreground"},ge={key:0,class:"mt-2 text-xs text-muted-foreground"},fe={key:0},xe={key:1,class:"ml-2"},be={class:"flex gap-2 w-full sm:w-auto"},he={key:1,class:"absolute top-28 sm:top-24 left-4 right-4 sm:right-auto w-auto sm:w-80 bg-card border border-border rounded-lg shadow-xl p-4 z-[9999] max-h-[calc(100vh-10rem)] overflow-y-auto"},we={class:"flex justify-between items-center mb-4"},ye={class:"space-y-3"},_e={key:2,class:"absolute bottom-4 left-4 right-4 sm:left-auto sm:right-4 w-auto sm:w-80 bg-card border border-border rounded-lg shadow-xl p-3 sm:p-4 z-[9999]"},Ce={class:"flex justify-between items-start mb-2"},ke={class:"bg-muted border border-border rounded-lg p-3"},Fe={class:"font-semibold text-foreground text-sm"},Me={class:"text-muted-foreground text-xs mt-1"},Le={class:"flex items-center mt-2 text-xs"},ze={class:"text-yellow-400"},De={class:"text-foreground ml-1"},Ve={class:"text-muted-foreground ml-2"},Ne={class:"flex items-center mt-1 text-xs"},Se={key:0,class:"ml-2 bg-green-900 text-green-200 px-2 py-1 rounded-full text-xs"},Ae={class:"text-xs text-muted-foreground mt-2"},Be={key:0},Ee=S({__name:"fullMapView",props:{clinics:{default:()=>[]},mapCenter:{default:()=>[14.5995,120.9842]},filters:{default:()=>({})}},setup(g){const l=g,x=m(l.mapCenter),w=m(10),s=m(null),u=m(!0),y=m(!1),F=m(l.filters?.search||""),c=m(l.filters?.service||""),v=m(l.filters?.rating||""),b=m(l.filters?.distance||""),B=t=>(t.id*7%50+.5).toFixed(1),E=t=>parseFloat(B(t)),_=h(()=>{let t=l.clinics;if(F.value){const o=F.value.toLowerCase();t=t.filter(a=>a.name.toLowerCase().includes(o)||a.address.toLowerCase().includes(o))}if(c.value&&(t=t.filter(o=>o.services.some(a=>a.toLowerCase().includes(c.value.toLowerCase())))),v.value){const o=parseFloat(v.value);t=t.filter(a=>Number(a.rating||0)>=o)}if(b.value){const o=parseFloat(b.value);t=t.filter(a=>E(a)<=o)}return t}),$=h(()=>_.value.filter(t=>t.latitude&&t.longitude).map(t=>({id:t.id,lat:parseFloat(t.latitude.toString()),lng:parseFloat(t.longitude.toString()),title:t.name,description:`${t.address} â€¢ ${t.stars} (${Number(t.rating||0).toFixed(1)}) â€¢ ${t.is_open_24_7?"Open 24/7":t.status}`,type:t.is_open_24_7?"emergency":"clinic",clinic:t}))),j=t=>{s.value=t.clinic||t,console.log("Clinic selected:",s.value)},R=t=>{console.log("Fullscreen map ready:",t)},U=t=>{console.log("User location found:",t),x.value=[t.coords.latitude,t.coords.longitude]},q=t=>{console.warn("Location error:",t)},W=()=>{console.log("Fullscreen filters applied:",{service:c.value,rating:v.value,distance:b.value,resultCount:_.value.length})},I=()=>{c.value="",v.value="",b.value=""},M=()=>{y.value=!y.value},L=()=>{u.value=!u.value},O=()=>{console.log("exitFullscreen called");try{k.visit(te().url)}catch(t){console.error("Error navigating back to map:",t)}},T=()=>{s.value&&k.visit(oe().url,{data:{clinic_id:s.value.id,clinic_name:s.value.name},preserveScroll:!0})},G=()=>{s.value&&k.visit(se(s.value.id).url)};return X(()=>{document.body.style.overflow="hidden"}),Y(()=>{document.body.style.overflow=""}),(t,o)=>(r(),n(K,null,[p(f(le),{title:"Fullscreen Clinic Map"}),e("div",ie,[e("div",de,[p(P,{height:"100vh",width:"100vw",center:x.value,zoom:w.value,markers:$.value,"show-user-location":!0,onMarkerClick:j,onMapReady:R,onLocationFound:U,onLocationError:q,class:"h-full w-full"},{legend:Z(()=>[u.value?(r(),n("div",ue,[...o[3]||(o[3]=[e("h6",{class:"font-semibold mb-2 text-foreground"},"Legend",-1),e("div",{class:"space-y-1"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-blue-600 rounded-full"}),e("span",{class:"text-muted-foreground"},"Veterinary Clinic")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-red-600 rounded-full"}),e("span",{class:"text-muted-foreground"},"Emergency Hospital")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-green-600 rounded-full"}),e("span",{class:"text-muted-foreground"},"Your Location")])],-1)])])):d("",!0)]),_:1},8,["center","zoom","markers"]),u.value?(r(),n("div",ce,[e("div",ve,[e("div",me,[o[4]||(o[4]=e("h1",{class:"text-base sm:text-lg font-semibold text-foreground mb-1"}," Clinic Locations - Fullscreen ",-1)),e("p",pe,i(_.value.length)+" of "+i(l.clinics.length)+" clinics shown ",1),c.value||v.value?(r(),n("div",ge,[c.value?(r(),n("span",fe,"Category: "+i(c.value),1)):d("",!0),v.value?(r(),n("span",xe,"Rating: "+i(v.value)+"+",1)):d("",!0)])):d("",!0)]),e("div",be,[e("button",{onClick:M,class:"flex-1 sm:flex-none bg-card border border-border text-foreground p-2 sm:p-3 rounded-lg shadow-lg hover:bg-muted transition-colors"},[p(f(re),{class:"w-4 h-4 sm:w-5 sm:h-5"})]),e("button",{onClick:L,class:"flex-1 sm:flex-none bg-card border border-border text-foreground p-2 sm:p-3 rounded-lg shadow-lg hover:bg-muted transition-colors"},[p(N,{name:u.value?"eyeOff":"eye",class:"w-4 h-4 sm:w-5 sm:h-5"},null,8,["name"])]),e("button",{onClick:O,class:"flex-1 sm:flex-none bg-destructive text-destructive-foreground p-2 sm:p-3 rounded-lg shadow-lg hover:bg-destructive/90 transition-colors"},[p(f(C),{class:"w-4 h-4 sm:w-5 sm:h-5"})])])])])):d("",!0),y.value&&u.value?(r(),n("div",he,[e("div",we,[o[5]||(o[5]=e("h3",{class:"text-sm font-semibold text-foreground"},"Quick Filters",-1)),e("button",{onClick:M,class:"text-muted-foreground hover:text-foreground"},[p(f(C),{class:"w-4 h-4"})])]),e("div",ye,[e("div",null,[o[7]||(o[7]=e("label",{class:"block text-xs font-medium text-foreground mb-1"},"Category",-1)),z(e("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>c.value=a),class:"w-full px-2 py-1 border border-border rounded text-xs bg-background text-foreground"},[...o[6]||(o[6]=[V('<option value="" data-v-832c6166>All categories</option><option value="consultation" data-v-832c6166>Consultation</option><option value="vaccination" data-v-832c6166>Vaccination</option><option value="surgery" data-v-832c6166>Surgery</option><option value="emergency" data-v-832c6166>Emergency</option><option value="grooming" data-v-832c6166>Grooming</option><option value="boarding" data-v-832c6166>Boarding</option><option value="wellness" data-v-832c6166>Wellness</option><option value="laboratory" data-v-832c6166>Laboratory</option><option value="marine" data-v-832c6166>Marine Care</option><option value="livestock" data-v-832c6166>Livestock</option><option value="aquatic" data-v-832c6166>Aquatic</option><option value="traditional care" data-v-832c6166>Traditional Care</option><option value="disaster response" data-v-832c6166>Disaster Response</option>',14)])],512),[[D,c.value]])]),e("div",null,[o[9]||(o[9]=e("label",{class:"block text-xs font-medium text-foreground mb-1"},"Minimum rating",-1)),z(e("select",{"onUpdate:modelValue":o[1]||(o[1]=a=>v.value=a),class:"w-full px-2 py-1 border border-border rounded text-xs bg-background text-foreground"},[...o[8]||(o[8]=[V('<option value="" data-v-832c6166>Any rating</option><option value="5" data-v-832c6166>5 stars</option><option value="4" data-v-832c6166>4+ stars</option><option value="3" data-v-832c6166>3+ stars</option><option value="2" data-v-832c6166>2+ stars</option>',5)])],512),[[D,v.value]])]),e("div",{class:"flex gap-2 pt-2"},[e("button",{onClick:W,class:"flex-1 bg-primary text-primary-foreground py-1 px-2 rounded text-xs hover:bg-primary/90"}," Apply "),e("button",{onClick:I,class:"flex-1 border border-border text-foreground py-1 px-2 rounded text-xs hover:bg-muted"}," Clear ")])])])):d("",!0),s.value&&u.value?(r(),n("div",_e,[e("div",Ce,[o[10]||(o[10]=e("h4",{class:"font-semibold text-foreground text-sm"},"Selected Clinic",-1)),e("button",{onClick:o[2]||(o[2]=a=>s.value=null),class:"text-muted-foreground hover:text-foreground"},[p(f(C),{class:"w-4 h-4"})])]),e("div",ke,[e("h5",Fe,i(s.value.name),1),e("p",Me,"ðŸ“ "+i(s.value.address),1),e("div",Le,[e("span",ze,i(s.value.stars),1),e("span",De,"("+i(Number(s.value.rating||0).toFixed(1))+")",1),e("span",Ve,i(s.value.total_reviews)+" reviews",1)]),e("div",Ne,[e("span",{class:A(s.value.status_color)},i(s.value.status),3),s.value.is_open_24_7?(r(),n("span",Se," 24/7 ")):d("",!0)]),e("div",Ae,[o[11]||(o[11]=e("span",{class:"font-medium"},"Categories:",-1)),J(" "+i(s.value.services?.slice(0,3).join(", "))+" ",1),s.value.services?.length>3?(r(),n("span",Be,"...")):d("",!0)]),e("div",{class:"flex gap-2 mt-3"},[e("button",{onClick:T,class:"flex-1 bg-primary text-primary-foreground py-2 px-3 rounded-lg text-xs hover:bg-primary/90"}," Book Appointment "),e("button",{onClick:G,class:"flex-1 border border-border text-foreground py-2 px-3 rounded-lg text-xs hover:bg-muted"}," View Details ")])])])):d("",!0),u.value?d("",!0):(r(),n("button",{key:3,onClick:L,class:"absolute top-4 right-4 bg-card border border-border text-foreground p-3 rounded-full shadow-lg hover:bg-muted transition-colors z-[10000]"},[p(N,{name:"eye",class:"w-5 h-5"})]))])])],64))}}),Xe=ne(Ee,[["__scopeId","data-v-832c6166"]]);export{Xe as default};
