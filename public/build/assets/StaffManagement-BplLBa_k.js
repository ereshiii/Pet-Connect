import{d as le,r as f,c as re,o as ne,b as n,e as a,i,u as s,w as ae,h as e,g as c,t as d,F as y,k as D,p as F,j as m,n as _,q as k,s as w,ao as ie}from"./vue-vendor-DmxhFomr.js";import{k as de,c as ue}from"./admin-j62zy8g0.js";import{_ as ce}from"./UpgradePrompt.vue_vue_type_script_setup_true_lang-CCKfoXFr.js";import{a as me,u as pe,h as fe,r as B}from"./inertia-vendor-BXJnWAhq.js";import{ap as N,e as K,aa as be,N as xe,a1 as O,T as U,a3 as G,a6 as J,G as R,X as $,aq as ge}from"./lucide-vendor-BUHJwLVO.js";import"./vendor-BqPpK9Aj.js";import"./leaflet-vendor-Do2TvcFZ.js";import"./ui-components-Dj0vw2vK.js";import"./ui-vendor-B7N-G3Ug.js";import"./utility-vendor-CjxovF-h.js";const ve={class:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-6 pb-24 md:pb-6"},he={key:0,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},ye={class:"flex items-start gap-2"},_e={class:"text-red-800 dark:text-red-300 font-medium"},ke={class:"flex items-center justify-between"},we={class:"flex gap-2"},Ce={class:"rounded-lg border bg-card"},ze={class:"grid gap-4 p-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},Se={class:"flex items-start justify-between mb-3"},Me={class:"flex items-center gap-3"},De={class:"h-10 w-10 rounded-full bg-muted flex items-center justify-center"},Ve={class:"font-semibold"},je={class:"relative staff-dropdown-container"},Ee=["onClick"],Ae={key:0,class:"absolute right-0 top-8 w-48 bg-background border rounded-md shadow-lg z-10"},Fe=["onClick"],Ne=["onClick"],Ue=["onClick","disabled"],$e={class:"space-y-2 mb-4"},Pe={class:"flex items-center gap-2 text-sm"},Te={class:"truncate"},Le={class:"flex items-center gap-2 text-sm"},qe={key:0,class:"flex items-center gap-2 text-sm"},Be={key:0,class:"mb-4"},Ke={class:"flex flex-wrap gap-1"},Oe={key:0,class:"col-span-3 text-center py-12"},Ge={class:"text-muted-foreground"},Je={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Re={class:"bg-background rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl"},Xe={class:"sticky top-0 bg-background border-b p-6 flex items-center justify-between"},He={class:"p-6 space-y-6"},Ie={class:"flex items-start gap-4"},Qe={class:"h-20 w-20 rounded-full bg-muted flex items-center justify-center flex-shrink-0"},We={class:"flex-1"},Ye={class:"text-xl font-semibold"},Ze={class:"space-y-2"},et={class:"flex items-center gap-2 text-sm"},tt={class:"flex items-center gap-2 text-sm"},st={key:0,class:"flex items-center gap-2 text-sm"},ot={key:0},lt={class:"flex flex-wrap gap-2"},rt={class:"border-t p-6 flex justify-end gap-3"},nt={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},at={class:"bg-background rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl"},it={class:"sticky top-0 bg-background border-b p-6 flex items-center justify-between"},dt={class:"text-xl font-semibold"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ct={class:"md:col-span-2"},mt={key:0,class:"text-red-500 text-sm mt-1"},pt={class:"md:col-span-2"},ft={key:0,class:"text-red-500 text-sm mt-1"},bt={key:0,class:"text-red-500 text-sm mt-1"},xt={key:0,class:"text-red-500 text-sm mt-1"},gt={class:"md:col-span-2"},vt={class:"flex gap-2 mb-2"},ht=["onKeypress"],yt={key:0,class:"flex flex-wrap gap-2"},_t=["onClick"],kt={class:"flex gap-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},wt=["disabled"],Ct={key:2,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},zt={class:"bg-background rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto"},St={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Mt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6"},Dt={class:"flex items-start gap-4"},Vt={class:"flex-shrink-0"},jt={class:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center"},Et={class:"flex-1"},At={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},Ft={class:"flex gap-3 justify-end"},Jt=le({__name:"StaffManagement",props:{staff_members:{},filters:{},clinic:{},canAddStaff:{type:Boolean},staffLimit:{},show_upgrade_prompt:{type:Boolean}},setup(V){const X=[{title:"Clinic Dashboard",href:de().url},{title:"Staff Management",href:"/clinic/staff"}],P=V,C=f(!1),g=f(!1),u=f(null),v=f(null),j=f(!1),z=f(P.show_upgrade_prompt||!1),S=f(!1),b=f(null),o=me({name:"",email:"",phone:"",license_number:"",specializations:[]}),x=f(""),H=pe(),T=re(()=>H.props.errors),E=()=>{if(P.canAddStaff===!1){z.value=!0;return}g.value=!1,u.value=null,o.reset(),o.clearErrors(),C.value=!0},L=r=>{g.value=!0,u.value=r,o.name=r.name,o.email=r.email,o.phone=r.phone,o.license_number=r.license_number||"",o.specializations=r.specializations||[],C.value=!0},M=()=>{C.value=!1,o.reset(),o.clearErrors(),u.value=null,x.value=""},q=()=>{x.value.trim()&&(o.specializations.push(x.value.trim()),x.value="")},I=r=>{o.specializations.splice(r,1)},Q=()=>{g.value&&u.value?o.patch(`/clinic/vets/${u.value.id}`,{onSuccess:()=>{M()},onError:r=>{console.error("Update failed:",r)}}):o.post("/clinic/vets",{onSuccess:()=>{M()},onError:r=>{console.error("Create failed:",r),r.limit&&(z.value=!0)}})},W=r=>{v.value=v.value===r?null:r},h=()=>{v.value=null},Y=r=>{u.value=r,j.value=!0,h()},Z=r=>{h(),L(r)},ee=r=>{if(!r.can_delete){alert("Cannot delete this veterinarian. A clinic must have at least one veterinarian. To remove this veterinarian, please add another one first."),h();return}b.value=r,S.value=!0,h()},te=()=>{b.value&&B.delete(`/clinic/vets/${b.value.id}`,{preserveScroll:!0,onSuccess:()=>{S.value=!1,b.value=null,B.reload({only:["staff_members","stats"]})},onError:r=>{console.error("Delete failed:",r),alert("Failed to delete staff member. Please try again.")}})},se=()=>{S.value=!1,b.value=null},A=()=>{j.value=!1,u.value=null},oe=()=>{z.value=!1};return ne(()=>{document.addEventListener("click",r=>{v.value!==null&&(r.target.closest(".staff-dropdown-container")||h())})}),(r,t)=>(a(),n(y,null,[i(s(fe),{title:"Staff Management"}),i(ue,{breadcrumbs:X},{default:ae(()=>[e("div",ve,[T.value?.error?(a(),n("div",he,[e("div",ye,[t[6]||(t[6]=e("svg",{class:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("p",_e,d(T.value.error),1)])])])):c("",!0),e("div",ke,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-2xl font-semibold text-foreground"},"Veterinarians"),e("p",{class:"text-muted-foreground"},"Manage veterinarians and clinic staff")],-1)),e("div",we,[e("button",{onClick:E,class:"hidden md:flex btn btn-primary items-center gap-2"},[i(s(N),{class:"h-4 w-4"}),t[7]||(t[7]=e("span",null,"Add Vet",-1))])])]),e("button",{onClick:E,class:"md:hidden fixed bottom-6 right-6 z-40 flex items-center justify-center w-14 h-14 bg-primary text-primary-foreground hover:bg-primary/90 rounded-full shadow-lg transition-all hover:scale-110"},[i(s(N),{class:"h-6 w-6"})]),e("div",Ce,[t[17]||(t[17]=e("div",{class:"p-6 border-b"},[e("div",{class:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4"},[e("h2",{class:"text-lg font-semibold"},"Veterinarians Directory"),e("div",{class:"w-full md:w-auto md:flex-1 md:max-w-xs"},[e("input",{type:"search",placeholder:"Search veterinarians...",class:"w-full px-3 py-2 border border-input bg-background text-foreground rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"})])])],-1)),e("div",ze,[(a(!0),n(y,null,D(V.staff_members,l=>(a(),n("div",{key:l.id,class:"rounded-lg border p-4 hover:border-blue-500 hover:shadow-md transition-all duration-200"},[e("div",Se,[e("div",Me,[e("div",De,[i(s(K),{class:"h-5 w-5 text-muted-foreground"})]),e("div",null,[e("h3",Ve,d(l.name),1),t[9]||(t[9]=e("p",{class:"text-sm text-muted-foreground"},"Veterinarian",-1))])]),e("div",je,[e("button",{onClick:F(p=>W(l.id),["stop"]),class:"p-1 hover:bg-muted rounded transition-colors"},[i(s(be),{class:"h-4 w-4 text-muted-foreground"})],8,Ee),v.value===l.id?(a(),n("div",Ae,[e("button",{onClick:p=>Y(l),class:"flex items-center gap-2 w-full px-3 py-2 text-sm hover:bg-muted text-left"},[i(s(xe),{class:"h-4 w-4"}),t[10]||(t[10]=m(" View Full Details ",-1))],8,Fe),e("button",{onClick:p=>Z(l),class:"flex items-center gap-2 w-full px-3 py-2 text-sm hover:bg-muted text-left"},[i(s(O),{class:"h-4 w-4"}),t[11]||(t[11]=m(" Edit ",-1))],8,Ne),t[12]||(t[12]=e("hr",{class:"my-1"},null,-1)),e("button",{onClick:p=>ee(l),disabled:!l.can_delete,class:_(["flex items-center gap-2 w-full px-3 py-2 text-sm text-left transition-colors",l.can_delete?"hover:bg-muted text-red-600 cursor-pointer":"text-gray-400 dark:text-gray-600 cursor-not-allowed opacity-50"])},[i(s(U),{class:"h-4 w-4"}),m(" "+d(l.can_delete?"Delete":"Cannot Delete (Only 1 Vet)"),1)],10,Ue)])):c("",!0)])]),e("div",$e,[e("div",Pe,[i(s(G),{class:"h-4 w-4 text-muted-foreground"}),e("span",Te,d(l.email),1)]),e("div",Le,[i(s(J),{class:"h-4 w-4 text-muted-foreground"}),e("span",null,d(l.phone),1)]),l.license_number?(a(),n("div",qe,[i(s(R),{class:"h-4 w-4 text-muted-foreground"}),e("span",null,"License: "+d(l.license_number),1)])):c("",!0)]),l.specializations&&l.specializations.length?(a(),n("div",Be,[t[13]||(t[13]=e("p",{class:"text-sm font-medium mb-1"},"Specializations:",-1)),e("div",Ke,[(a(!0),n(y,null,D(l.specializations,p=>(a(),n("span",{key:p,class:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded text-xs"},d(p),1))),128))])])):c("",!0)]))),128)),V.staff_members.length===0?(a(),n("div",Oe,[e("div",Ge,[t[15]||(t[15]=e("p",{class:"text-lg mb-2"},"No veterinarians found",-1)),t[16]||(t[16]=e("p",{class:"mb-4"},"Add your first veterinarian to get started",-1)),e("button",{onClick:E,class:"btn btn-primary inline-flex items-center gap-2"},[i(s(N),{class:"h-5 w-5"}),t[14]||(t[14]=m(" Add Vet ",-1))])])])):c("",!0)])])]),j.value&&u.value?(a(),n("div",Je,[e("div",Re,[e("div",Xe,[t[18]||(t[18]=e("h2",{class:"text-xl font-semibold"}," Staff Member Details ",-1)),e("button",{onClick:A,class:"p-1 hover:bg-muted rounded"},[i(s($),{class:"h-5 w-5"})])]),e("div",He,[e("div",Ie,[e("div",Qe,[i(s(K),{class:"h-10 w-10 text-muted-foreground"})]),e("div",We,[e("h3",Ye,d(u.value.name),1),t[19]||(t[19]=e("p",{class:"text-muted-foreground"},"Veterinarian",-1))])]),e("div",null,[t[20]||(t[20]=e("h4",{class:"font-medium mb-3"},"Contact Information",-1)),e("div",Ze,[e("div",et,[i(s(G),{class:"h-4 w-4 text-muted-foreground"}),e("span",null,d(u.value.email),1)]),e("div",tt,[i(s(J),{class:"h-4 w-4 text-muted-foreground"}),e("span",null,d(u.value.phone),1)]),u.value.license_number?(a(),n("div",st,[i(s(R),{class:"h-4 w-4 text-muted-foreground"}),e("span",null,"License: "+d(u.value.license_number),1)])):c("",!0)])]),u.value.specializations&&u.value.specializations.length?(a(),n("div",ot,[t[21]||(t[21]=e("h4",{class:"font-medium mb-3"},"Specializations",-1)),e("div",lt,[(a(!0),n(y,null,D(u.value.specializations,l=>(a(),n("span",{key:l,class:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-full text-sm"},d(l),1))),128))])])):c("",!0)]),e("div",rt,[e("button",{onClick:A,type:"button",class:"px-4 py-2 text-sm border border-input rounded-md hover:bg-muted transition-colors"}," Close "),e("button",{onClick:t[0]||(t[0]=l=>{L(u.value),A()}),type:"button",class:"inline-flex items-center gap-2 bg-primary text-primary-foreground hover:bg-primary/90 px-4 py-2 rounded-md text-sm font-medium transition-colors"},[i(s(O),{class:"h-4 w-4"}),t[22]||(t[22]=m(" Edit Details ",-1))])])])])):c("",!0),C.value?(a(),n("div",nt,[e("div",at,[e("div",it,[e("h2",dt,d(g.value?"Edit Veterinarian":"Add New Veterinarian"),1),e("button",{onClick:M,class:"p-1 hover:bg-muted rounded"},[i(s($),{class:"h-5 w-5"})])]),e("form",{onSubmit:F(Q,["prevent"]),class:"p-6"},[e("div",ut,[e("div",ct,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-foreground mb-1"},[m(" Full Name "),e("span",{class:"text-red-500"},"*")],-1)),k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s(o).name=l),type:"text",required:"",placeholder:"Dr. Juan Dela Cruz",class:_(["w-full border border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":s(o).errors.name}])},null,2),[[w,s(o).name]]),s(o).errors.name?(a(),n("p",mt,d(s(o).errors.name),1)):c("",!0)]),e("div",pt,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-foreground mb-1"},[m(" PRC License Number "),e("span",{class:"text-red-500"},"*")],-1)),k(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>s(o).license_number=l),type:"text",required:"",placeholder:"License Number",class:_(["w-full border border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":s(o).errors.license_number}])},null,2),[[w,s(o).license_number]]),s(o).errors.license_number?(a(),n("p",ft,d(s(o).errors.license_number),1)):c("",!0)]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-foreground mb-1"}," Email Address ",-1)),k(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s(o).email=l),type:"email",placeholder:"email@example.com",class:_(["w-full border border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":s(o).errors.email}])},null,2),[[w,s(o).email]]),s(o).errors.email?(a(),n("p",bt,d(s(o).errors.email),1)):c("",!0)]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-foreground mb-1"}," Phone Number ",-1)),k(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s(o).phone=l),type:"tel",placeholder:"(02) 123-4567",class:_(["w-full border border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary",{"border-red-500":s(o).errors.phone}])},null,2),[[w,s(o).phone]]),s(o).errors.phone?(a(),n("p",xt,d(s(o).errors.phone),1)):c("",!0)]),e("div",gt,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-foreground mb-1"}," Specializations (Optional) ",-1)),e("div",vt,[k(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>x.value=l),onKeypress:ie(F(q,["prevent"]),["enter"]),type:"text",placeholder:"e.g., Small Animal Medicine, Surgery (Press Enter to add)",class:"flex-1 border border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary"},null,40,ht),[[w,x.value]]),e("button",{type:"button",onClick:q,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Add ")]),s(o).specializations.length?(a(),n("div",yt,[(a(!0),n(y,null,D(s(o).specializations,(l,p)=>(a(),n("span",{key:p,class:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm"},[m(d(l)+" ",1),e("button",{type:"button",onClick:Nt=>I(p),class:"hover:bg-blue-200 dark:hover:bg-blue-800 rounded-full p-0.5"},[i(s($),{class:"h-3 w-3"})],8,_t)]))),128))])):c("",!0)])]),e("div",kt,[e("button",{type:"button",onClick:M,class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-foreground rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 font-medium"}," Cancel "),e("button",{type:"submit",disabled:s(o).processing,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium disabled:opacity-50 flex items-center justify-center gap-2"},[i(s(ge),{class:"h-5 w-5"}),m(" "+d(s(o).processing?"Saving...":g.value?"Update Vet":"Add Vet"),1)],8,wt)])],32)])])):c("",!0),z.value?(a(),n("div",Ct,[e("div",zt,[i(ce,{feature:"Add More Staff Members","required-plan":"professional","is-modal":"",onClose:oe})])])):c("",!0),S.value?(a(),n("div",St,[e("div",Mt,[e("div",Dt,[e("div",Vt,[e("div",jt,[i(s(U),{class:"h-6 w-6 text-red-600 dark:text-red-400"})])]),e("div",Et,[t[31]||(t[31]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2"}," Delete Staff Member ",-1)),e("p",At,[t[28]||(t[28]=m(" Are you sure you want to permanently delete ",-1)),e("strong",null,d(b.value?.name),1),t[29]||(t[29]=m("? This action cannot be undone. ",-1))]),e("div",Ft,[e("button",{onClick:se,type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"}," Cancel "),e("button",{onClick:te,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2"},[i(s(U),{class:"h-4 w-4"}),t[30]||(t[30]=m(" Delete ",-1))])])])])])])):c("",!0)]),_:1})],64))}});export{Jt as default};
