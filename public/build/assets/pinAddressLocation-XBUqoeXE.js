import{M as A}from"./map-e4zgbuYL.js";import{d as B,r as s,K as y,o as I,b as d,e as c,h as e,g as v,j as f,t as u,i as N,w as P}from"./vue-vendor-DmxhFomr.js";import{_ as j}from"./auth-a3bL7d2J.js";import"./leaflet-vendor-Do2TvcFZ.js";import"./vendor-BqPpK9Aj.js";import"./ui-components-Dj0vw2vK.js";import"./admin-j62zy8g0.js";import"./inertia-vendor-BXJnWAhq.js";import"./lucide-vendor-BUHJwLVO.js";import"./utility-vendor-CjxovF-h.js";import"./ui-vendor-B7N-G3Ug.js";const E={class:"space-y-4"},O={class:"flex flex-col sm:flex-row gap-3"},U=["disabled"],T={key:0,class:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24"},V={key:1,class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},S={key:0,class:"p-3 bg-green-50 border border-green-200 rounded-md"},D={class:"flex items-center"},G={class:"text-sm text-green-700"},R={key:1,class:"p-3 bg-red-50 border border-red-200 rounded-md"},F={class:"flex items-center"},H={class:"text-sm text-red-700"},Y={key:2,class:"p-3 bg-blue-50 border border-blue-200 rounded-md"},q={class:"text-sm"},K={class:"text-blue-600 font-mono"},Z={class:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden"},J=B({__name:"pinAddressLocation",props:{latitude:{default:null},longitude:{default:null},address:{default:""}},emits:["locationUpdate"],setup(h,{emit:b}){const a=h,k=b,p=s(),i=s(!1),r=s(null),n=s(null),g=s([14.5995,120.9842]),w=s(13),x=s([]),m=(o,t)=>{x.value=[{id:"clinic-location",lat:o,lng:t,title:"Clinic Location",description:a.address||"Clinic address location",type:"clinic"}]};y(()=>[a.latitude,a.longitude],([o,t])=>{o&&t&&(g.value=[o,t],m(o,t))},{immediate:!0});const _=async()=>{if(i.value=!0,r.value=null,n.value=null,!navigator.geolocation){r.value="Geolocation is not supported by this browser.",i.value=!1;return}try{const o=await new Promise((M,z)=>{navigator.geolocation.getCurrentPosition(M,z,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),{latitude:t,longitude:l}=o.coords;g.value=[t,l],m(t,l),k("locationUpdate",{latitude:t,longitude:l}),n.value="Location detected successfully!",p.value&&p.value.centerOnLocation(t,l,16)}catch(o){switch(console.error("Error getting location:",o),o.code){case o.PERMISSION_DENIED:r.value="Location access denied. Please enable location permissions and try again.";break;case o.POSITION_UNAVAILABLE:r.value="Location information is unavailable.";break;case o.TIMEOUT:r.value="Location request timed out. Please try again.";break;default:r.value="An unknown error occurred while getting your location.";break}}finally{i.value=!1}},C=o=>{const{lat:t,lng:l}=o.latlng;m(t,l),k("locationUpdate",{latitude:t,longitude:l}),n.value="Location pinned on map!",r.value=null},L=()=>{setTimeout(()=>{n.value=null,r.value=null},5e3)};return y([n,r],()=>{L()}),I(()=>{a.latitude&&a.longitude&&m(a.latitude,a.longitude)}),(o,t)=>(c(),d("div",E,[t[7]||(t[7]=e("div",null,[e("h3",{class:"text-md font-semibold text-gray-900 dark:text-gray-100 mb-2"}," ðŸ“ Pin Your Clinic Location "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Click on the map to pin your clinic's exact location, or use your current location if you're at the clinic. ")],-1)),e("div",O,[e("button",{onClick:_,disabled:i.value,class:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[i.value?(c(),d("svg",T,[...t[0]||(t[0]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(c(),d("svg",V,[...t[1]||(t[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)])])),f(" "+u(i.value?"Getting Location...":"Use Current Location"),1)],8,U),t[2]||(t[2]=e("div",{class:"text-sm text-gray-600 dark:text-gray-400 flex items-center"},[e("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),f(" Or click anywhere on the map to pin location ")],-1))]),n.value?(c(),d("div",S,[e("div",D,[t[3]||(t[3]=e("svg",{class:"h-4 w-4 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",G,u(n.value),1)])])):v("",!0),r.value?(c(),d("div",R,[e("div",F,[t[4]||(t[4]=e("svg",{class:"h-4 w-4 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",H,u(r.value),1)])])):v("",!0),a.latitude&&a.longitude?(c(),d("div",Y,[e("div",q,[t[5]||(t[5]=e("p",{class:"font-medium text-blue-800"},"ðŸ“ Selected Location:",-1)),e("p",K," Latitude: "+u(a.latitude.toFixed(6))+", Longitude: "+u(a.longitude.toFixed(6)),1)])])):v("",!0),e("div",Z,[N(A,{ref_key:"mapRef",ref:p,center:g.value,zoom:w.value,markers:x.value,"show-user-location":!1,height:"400px",class:"w-full",onMapClick:C},{legend:P(()=>[...t[6]||(t[6]=[e("div",{class:"bg-white dark:bg-gray-800 p-2 rounded-lg shadow-md border border-gray-200 dark:border-gray-600"},[e("div",{class:"text-xs text-gray-600 dark:text-gray-400"},[e("div",{class:"flex items-center mb-1"},[e("div",{class:"w-3 h-3 bg-blue-600 rounded-full mr-2"}),e("span",null,"Clinic Location")]),e("p",{class:"text-gray-500 dark:text-gray-500"},"Click to pin location")])],-1)])]),_:1},8,["center","zoom","markers"])]),t[8]||(t[8]=e("div",{class:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2"},"ðŸ“‹ Instructions:"),e("ul",{class:"text-sm text-gray-600 dark:text-gray-400 space-y-1"},[e("li",null,`â€¢ Click the "Use Current Location" button if you're currently at your clinic`),e("li",null,"â€¢ Or click anywhere on the map to manually pin your clinic's location"),e("li",null,"â€¢ You can zoom in/out and drag the map to find the exact location"),e("li",null,"â€¢ The pinned location will be saved with your clinic registration")])],-1))]))}}),se=j(J,[["__scopeId","data-v-2159a532"]]);export{se as default};
