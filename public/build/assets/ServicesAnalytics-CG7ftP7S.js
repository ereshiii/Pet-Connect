import{d as T,r as V,c as F,b as g,e as n,i as a,u as t,w as o,h as e,a as f,q as R,v as U,j as i,t as d,n as h,l as w,g as k,F as y,k as z,x as P}from"./vue-vendor-DmxhFomr.js";import{c as q}from"./admin-j62zy8g0.js";import{h as E,r as G}from"./inertia-vendor-BXJnWAhq.js";import{_ as K}from"./BarChart.vue_vue_type_script_setup_true_lang-CkR_BlL8.js";import{K as c,L as u,M as p,N as x,O as S,t as O}from"./ui-components-Dj0vw2vK.js";import{U as A,al as C,am as D,A as H,e as $}from"./lucide-vendor-BUHJwLVO.js";import"./vendor-BqPpK9Aj.js";import"./leaflet-vendor-Do2TvcFZ.js";import"./utility-vendor-CjxovF-h.js";import"./ui-vendor-B7N-G3Ug.js";const I={class:"flex h-full flex-1 flex-col gap-3 sm:gap-6 overflow-x-auto p-3 sm:p-6"},J={class:"flex flex-col gap-2 sm:gap-4"},Q={class:"grid gap-2 md:gap-4 grid-cols-3 md:grid-cols-3"},W={class:"text-base md:text-2xl font-bold text-foreground"},X={class:"text-base md:text-2xl font-bold text-foreground"},Y={class:"text-base md:text-2xl font-bold text-foreground"},Z={class:"overflow-x-auto"},ee={class:"min-w-[320px] sm:min-w-0 px-3 sm:px-0"},te={key:0,class:"flex items-center justify-center h-[200px] sm:h-[250px] text-muted-foreground px-3"},se={class:"text-center"},ae={class:"space-y-1.5 sm:space-y-3"},oe={class:"flex items-center justify-center w-5 h-5 sm:w-10 sm:h-10 rounded-full bg-primary/10 text-primary font-bold text-[10px] sm:text-base flex-shrink-0"},re={class:"flex-1 min-w-0"},le={class:"flex justify-between items-start gap-1.5 sm:gap-2 mb-1 sm:mb-2"},de={class:"flex-1 min-w-0"},ne={class:"font-semibold text-xs sm:text-lg text-foreground truncate"},ie={class:"text-[9px] sm:text-sm text-muted-foreground mt-0.5 sm:mt-1"},me={class:"flex flex-col items-end gap-0.5 sm:gap-1 flex-shrink-0"},ce={class:"w-full bg-muted rounded-full h-1.5 sm:h-2.5"},ke=T({__name:"ServicesAnalytics",props:{service_performance:{default:()=>[]},service_stats:{default:()=>({total_bookings:0,average_service_duration:0,total_services:0,booking_growth:0})},date_range:{default:()=>({period:"30"})}},setup(r){const j=[{title:"Clinic Dashboard",href:"#"},{title:"Services Analytics",href:"#"}],b=r,v=V(b.date_range?.period||"30"),B=()=>{G.get("/clinic/reports/services",{date_range:v.value},{preserveState:!0,replace:!0})},_=m=>m>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",L=F(()=>({labels:b.service_performance.slice(0,10).map(m=>m.service_name),datasets:[{label:"Bookings",data:b.service_performance.slice(0,10).map(m=>m.total_bookings),backgroundColor:"rgba(16, 185, 129, 0.8)"}]}));return(m,s)=>(n(),g(y,null,[a(t(E),{title:"Services Analytics"}),a(q,{breadcrumbs:j},{default:o(()=>[e("div",I,[e("div",J,[s[2]||(s[2]=e("div",null,[e("h1",{class:"text-xl sm:text-3xl font-bold tracking-tight text-foreground"},"Services Analytics"),e("p",{class:"text-muted-foreground mt-0.5 sm:mt-1 text-xs sm:text-base"},"Service performance and booking trends")],-1)),R(e("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>v.value=l),onChange:B,class:"px-3 py-1.5 sm:py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary w-full sm:w-fit text-xs sm:text-base"},[...s[1]||(s[1]=[e("option",{value:"1"},"Last 24 hours",-1),e("option",{value:"7"},"Last 7 days",-1),e("option",{value:"30"},"Last 30 days",-1),e("option",{value:"90"},"Last 3 months",-1),e("option",{value:"365"},"Last year",-1),e("option",{value:"all"},"All Time",-1)])],544),[[U,v.value]])]),e("div",Q,[a(t(c),{class:"bg-card border-border"},{default:o(()=>[a(t(u),{class:"flex flex-row items-center justify-between pb-0 space-y-0 p-2.5 md:p-4"},{default:o(()=>[a(t(p),{class:"text-xs md:text-sm font-medium text-foreground"},{default:o(()=>[...s[3]||(s[3]=[i("Total Bookings",-1)])]),_:1}),a(t(A),{class:"hidden md:block h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0"})]),_:1}),a(t(x),{class:"p-2.5 pt-0 md:p-4 md:pt-0"},{default:o(()=>[e("div",W,d(r.service_stats.total_bookings.toLocaleString()),1),e("div",{class:h(["flex items-center gap-1 text-[10px] md:text-xs mt-0.5",_(r.service_stats.booking_growth)])},[(n(),f(w(r.service_stats.booking_growth>=0?t(C):t(D)),{class:"h-2.5 w-2.5 sm:h-3 sm:w-3"})),e("span",null,d(Math.abs(r.service_stats.booking_growth).toFixed(1))+"%",1)],2)]),_:1})]),_:1}),a(t(c),{class:"bg-card border-border"},{default:o(()=>[a(t(u),{class:"flex flex-row items-center justify-between pb-0 space-y-0 p-2.5 md:p-4"},{default:o(()=>[a(t(p),{class:"text-xs md:text-sm font-medium text-foreground"},{default:o(()=>[...s[4]||(s[4]=[i("Avg Duration",-1)])]),_:1}),a(t(H),{class:"hidden md:block h-5 w-5 text-purple-600 dark:text-purple-400 flex-shrink-0"})]),_:1}),a(t(x),{class:"p-2.5 pt-0 md:p-4 md:pt-0"},{default:o(()=>[e("div",X,d(r.service_stats.average_duration)+" min",1),s[5]||(s[5]=e("p",{class:"text-[10px] md:text-xs text-muted-foreground mt-0.5"},"Per appointment",-1))]),_:1})]),_:1}),a(t(c),{class:"bg-card border-border"},{default:o(()=>[a(t(u),{class:"flex flex-row items-center justify-between pb-0 space-y-0 p-2.5 md:p-4"},{default:o(()=>[a(t(p),{class:"text-xs md:text-sm font-medium text-foreground"},{default:o(()=>[...s[6]||(s[6]=[i("Total Services",-1)])]),_:1}),a(t($),{class:"hidden md:block h-5 w-5 text-orange-600 dark:text-orange-400 flex-shrink-0"})]),_:1}),a(t(x),{class:"p-2.5 pt-0 md:p-4 md:pt-0"},{default:o(()=>[e("div",Y,d(r.service_stats.total_services),1),s[7]||(s[7]=e("p",{class:"text-[10px] md:text-xs text-muted-foreground mt-0.5"},"Services offered",-1))]),_:1})]),_:1})]),a(t(c),{class:"bg-card border-border"},{default:o(()=>[a(t(u),{class:"p-3 sm:p-6"},{default:o(()=>[a(t(p),{class:"text-sm sm:text-xl text-foreground"},{default:o(()=>[...s[8]||(s[8]=[i("Top Services by Bookings",-1)])]),_:1}),a(t(S),{class:"text-[10px] sm:text-sm text-muted-foreground"},{default:o(()=>[...s[9]||(s[9]=[i("Most popular services",-1)])]),_:1})]),_:1}),a(t(x),{class:"p-0 sm:px-6 sm:pb-6"},{default:o(()=>[e("div",Z,[e("div",ee,[r.service_performance.length>0?(n(),f(K,{key:0,data:L.value,height:200,title:""},null,8,["data"])):k("",!0)])]),r.service_performance.length===0?(n(),g("div",te,[e("div",se,[a(t(A),{class:"h-8 w-8 sm:h-12 sm:w-12 mx-auto mb-2 sm:mb-3 opacity-30"}),s[10]||(s[10]=e("p",{class:"text-xs sm:text-base"},"No booking data available",-1))])])):k("",!0)]),_:1})]),_:1}),r.service_performance.length>0?(n(),f(t(c),{key:0,class:"bg-card border-border"},{default:o(()=>[a(t(u),{class:"p-3 sm:p-6"},{default:o(()=>[a(t(p),{class:"text-sm sm:text-xl text-foreground"},{default:o(()=>[...s[11]||(s[11]=[i("All Services Performance",-1)])]),_:1}),a(t(S),{class:"text-[10px] sm:text-sm text-muted-foreground"},{default:o(()=>[...s[12]||(s[12]=[i("Detailed breakdown of each service",-1)])]),_:1})]),_:1}),a(t(x),{class:"p-2 sm:p-6 pt-0 sm:pt-0"},{default:o(()=>[e("div",ae,[(n(!0),g(y,null,z(r.service_performance,(l,M)=>(n(),g("div",{key:l.service_name,class:"flex items-start gap-1.5 sm:gap-4 p-1.5 sm:p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors"},[e("div",oe,d(M+1),1),e("div",re,[e("div",le,[e("div",de,[e("h4",ne,d(l.service_name),1),e("p",ie,d(l.total_bookings)+" bookings â€¢ "+d(l.average_duration)+" min ",1)]),e("div",me,[a(t(O),{variant:"secondary",class:"text-[10px] sm:text-sm px-1.5 py-0 sm:px-2.5 sm:py-0.5 whitespace-nowrap"},{default:o(()=>[i(d(l.total_bookings),1)]),_:2},1024),e("div",{class:h(["flex items-center gap-0.5 sm:gap-1 text-[10px] sm:text-sm",_(l.growth_rate)])},[(n(),f(w(l.growth_rate>=0?t(C):t(D)),{class:"h-2.5 w-2.5 sm:h-3 sm:w-3"})),e("span",null,d(Math.abs(l.growth_rate).toFixed(1))+"%",1)],2)])]),e("div",ce,[e("div",{class:"bg-blue-500 dark:bg-blue-400 h-1.5 sm:h-2.5 rounded-full transition-all",style:P({width:`${Math.min(l.total_bookings/Math.max(...r.service_performance.map(N=>N.total_bookings))*100,100)}%`})},null,4)])])]))),128))])]),_:1})]),_:1})):(n(),f(t(c),{key:1,class:"bg-card border-border"},{default:o(()=>[a(t(x),{class:"flex flex-col items-center justify-center h-40 sm:h-64 text-muted-foreground p-3 sm:p-6"},{default:o(()=>[a(t($),{class:"h-10 w-10 sm:h-16 sm:w-16 mb-2 sm:mb-4 opacity-30"}),s[13]||(s[13]=e("p",{class:"text-sm sm:text-lg font-medium text-center"},"No service data available",-1)),s[14]||(s[14]=e("p",{class:"text-[10px] sm:text-sm text-center mt-1 sm:mt-2"},"Service analytics will appear here once you start offering services",-1))]),_:1})]),_:1}))])]),_:1})],64))}});export{ke as default};
