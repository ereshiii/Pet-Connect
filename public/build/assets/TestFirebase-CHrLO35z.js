import{u as _}from"./useFirebaseNotifications-BTsjc3Sb.js";import{d as N,r as f,b as a,e as n,h as e,g as b,n as y,u as s,t as o,F as T,k as C}from"./vue-vendor-DmxhFomr.js";import"./vendor-BqPpK9Aj.js";import"./leaflet-vendor-Do2TvcFZ.js";import"./useToast-Dsd6g505.js";import"./toast-vendor-DVSe2vMM.js";const S={class:"min-h-screen bg-gray-50 dark:bg-gray-900 p-8"},P={class:"max-w-2xl mx-auto space-y-6"},F={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},E={class:"space-y-4"},B={class:"text-2xl"},L={class:"text-sm"},j={class:"text-2xl"},q={class:"text-sm capitalize"},A={key:0,class:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},D={class:"text-xs font-mono break-all text-gray-600 dark:text-gray-400"},R=["disabled"],z=["disabled"],I={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},O={class:"space-y-3"},V={class:"font-semibold text-gray-900 dark:text-gray-100"},Y={class:"text-sm text-gray-600 dark:text-gray-400"},K={class:"text-xs text-gray-500 dark:text-gray-500 mt-2"},U=N({__name:"TestFirebase",setup(M){const{isSupported:d,permission:r,fcmToken:l,enableNotifications:m}=_(),c=f(!1),u=f(!1),g=f([]),x=async()=>{c.value=!0;try{await m()&&console.log("‚úÖ Notifications enabled successfully!")}finally{c.value=!1}},k=async()=>{if(l.value){u.value=!0;try{const i=await fetch(`/api/device-tokens/${l.value}/test`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}});if(i.ok){const t=await i.json();console.log("‚úÖ Test notification sent:",t),g.value.unshift({title:"Test Notification",body:"This is a test notification from PetConnect!",time:new Date().toLocaleTimeString()})}else console.error("‚ùå Failed to send test notification")}catch(i){console.error("‚ùå Error sending test notification:",i)}finally{u.value=!1}}},h=()=>{switch(r.value){case"granted":return"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400";case"denied":return"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400";default:return"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400"}},v=()=>{switch(r.value){case"granted":return"‚úÖ";case"denied":return"‚ùå";default:return"‚è≥"}};return typeof window<"u"&&window.addEventListener("firebase-notification",i=>{const t=i.detail;g.value.unshift({title:t.notification?.title||"Notification",body:t.notification?.body||"",time:new Date().toLocaleTimeString()})}),(i,t)=>(n(),a("div",S,[e("div",P,[e("div",F,[t[3]||(t[3]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4"}," üîî Firebase Push Notifications Test ",-1)),e("div",E,[e("div",{class:y(["flex items-center gap-3 p-4 rounded-lg",s(d)?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400"])},[e("span",B,o(s(d)?"‚úÖ":"‚ùå"),1),e("div",null,[t[0]||(t[0]=e("p",{class:"font-semibold"},"Browser Support",-1)),e("p",L,o(s(d)?"Your browser supports push notifications":"Push notifications not supported"),1)])],2),e("div",{class:y(["flex items-center gap-3 p-4 rounded-lg",h()])},[e("span",j,o(v()),1),e("div",null,[t[1]||(t[1]=e("p",{class:"font-semibold"},"Permission Status",-1)),e("p",q,o(s(r)),1)])],2),s(l)?(n(),a("div",A,[t[2]||(t[2]=e("p",{class:"font-semibold text-gray-900 dark:text-gray-100 mb-2"},"FCM Token:",-1)),e("p",D,o(s(l)),1)])):b("",!0),s(d)&&s(r)!=="granted"?(n(),a("button",{key:1,onClick:x,disabled:c.value,class:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},o(c.value?"Requesting Permission...":"üîî Enable Push Notifications"),9,R)):b("",!0),s(r)==="granted"&&s(l)?(n(),a("button",{key:2,onClick:k,disabled:u.value,class:"w-full py-3 px-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},o(u.value?"Sending...":"üì§ Send Test Notification"),9,z)):b("",!0)])]),g.value.length>0?(n(),a("div",I,[t[4]||(t[4]=e("h2",{class:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4"}," üì¨ Recent Notifications ",-1)),e("div",O,[(n(!0),a(T,null,C(g.value,(p,w)=>(n(),a("div",{key:w,class:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("p",V,o(p.title),1),e("p",Y,o(p.body),1),e("p",K,o(p.time),1)]))),128))])])):b("",!0),t[5]||(t[5]=e("div",{class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6"},[e("h3",{class:"font-semibold text-blue-900 dark:text-blue-300 mb-2"},"üìù Instructions:"),e("ol",{class:"list-decimal list-inside space-y-2 text-sm text-blue-800 dark:text-blue-400"},[e("li",null,'Click "Enable Push Notifications" to request permission'),e("li",null,"Allow notifications when prompted by your browser"),e("li",null,'Click "Send Test Notification" to test the system'),e("li",null,"You should receive a notification instantly!")])],-1))])]))}});export{U as default};
