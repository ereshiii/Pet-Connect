import{r as F,h as z}from"./inertia-vendor-BXJnWAhq.js";import{c as K}from"./admin-j62zy8g0.js";import{S as q,W as J,X,Y as Q,D as $,E as V,a as E,R as ee,t as D}from"./ui-components-Dj0vw2vK.js";import{d as L,r as g,o as te,a as w,e as o,w as m,i as n,u as s,h as e,j as f,b as c,g as _,F as N,k as Y,n as A,q as ae,az as se,l as le,t as i}from"./vue-vendor-DmxhFomr.js";import{a as ne}from"./vendor-BqPpK9Aj.js";import{h as I,aB as oe,at as H,_ as re,ae as de,S as ie,Z as ue,m as me}from"./lucide-vendor-BUHJwLVO.js";import"./utility-vendor-CjxovF-h.js";import"./ui-vendor-B7N-G3Ug.js";import"./leaflet-vendor-Do2TvcFZ.js";const ce={class:"space-y-6"},pe={class:"space-y-3"},ve={class:"space-y-2"},fe=["onClick"],ye=["value","id"],xe={class:"flex-1"},ge={class:"text-xs text-muted-foreground"},_e={key:0,class:"space-y-4"},be={key:0,class:"rounded-lg bg-blue-50 dark:bg-blue-950/20 p-3 text-sm"},he={class:"text-blue-900 dark:text-blue-100 flex items-center gap-2"},Ce={class:"space-y-2"},ke={class:"space-y-2"},Pe={class:"grid grid-cols-3 gap-4"},$e={class:"space-y-2"},we={class:"space-y-2"},Me={class:"space-y-2"},Se={key:1,class:"rounded-lg bg-blue-50 dark:bg-blue-950/20 p-4 text-sm"},Ve={class:"text-blue-900 dark:text-blue-100"},Ue={class:"space-y-2 rounded-lg border p-4 bg-muted/50"},Ne={class:"flex justify-between text-sm"},Ae={class:"flex justify-between text-sm text-muted-foreground"},Fe={class:"flex justify-between font-semibold"},je={key:2,class:"flex items-center gap-2 rounded-lg bg-destructive/10 p-3 text-sm text-destructive"},De={class:"flex gap-3"},Ee=L({__name:"PaymentModal",props:{open:{type:Boolean},planSlug:{},amount:{},billingCycle:{},publicKey:{},savedPaymentMethod:{}},emits:["update:open","success","error"],setup(h,{emit:j}){const u=h,k=j,p=g("card"),v=g(!1),P=g(null),b=g(!1),x=g(""),M=g(""),S=g(""),d=g(""),l=g(""),a=[{value:"card",label:"Credit/Debit Card",icon:I,fee:3.5},{value:"gcash",label:"GCash",icon:oe,fee:2.5},{value:"grab_pay",label:"GrabPay",icon:H,fee:2.5},{value:"paymaya",label:"Maya",icon:H,fee:3.5}],C=g({amount:u.amount,fee:0,total:u.amount}),B=async()=>{try{const y=await ne.post("/payment/calculate-total",{amount:u.amount,payment_method:p.value});C.value=y.data}catch(y){console.error("Fee calculation error:",y)}},U=y=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(y),G=async()=>{P.value=null,v.value=!0;try{p.value==="card"?await T():await W()}catch(y){P.value=y.response?.data?.message||y.message||"Payment failed",v.value=!1}},T=async()=>{try{if(!x.value||!M.value||!S.value||!d.value||!l.value)throw new Error("Please fill in all card details");const y=x.value.replace(/\s/g,"");F.post("/payment/process",{plan_slug:u.planSlug,billing_cycle:u.billingCycle,payment_method:"card",payment_method_id:y},{onSuccess:()=>{k("success"),k("update:open",!1)},onError:t=>{P.value=Object.values(t).flat().join(", "),v.value=!1}})}catch(y){throw new Error(y.message||"Card payment failed")}},W=async()=>{F.post("/payment/process",{plan_slug:u.planSlug,billing_cycle:u.billingCycle,payment_method:p.value,payment_method_id:null},{onError:y=>{P.value=Object.values(y).flat().join(", "),v.value=!1}})},O=()=>{x.value=x.value.replace(/\s/g,"").replace(/(\d{4})/g,"$1 ").trim()},Z=()=>{u.savedPaymentMethod&&u.savedPaymentMethod.type==="card"&&(b.value=!0,p.value="card",x.value="â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ "+u.savedPaymentMethod.last_four)};return te(()=>{B(),Z()}),(y,t)=>(o(),w(s(ee),{open:h.open,"onUpdate:open":t[8]||(t[8]=r=>k("update:open",r))},{default:m(()=>[n(s(q),{class:"max-w-md"},{default:m(()=>[n(s(J),null,{default:m(()=>[n(s(X),null,{default:m(()=>[...t[9]||(t[9]=[f("Complete Payment",-1)])]),_:1}),n(s(Q),null,{default:m(()=>[...t[10]||(t[10]=[f(" Choose your preferred payment method ",-1)])]),_:1})]),_:1}),e("div",ce,[e("div",pe,[n(s($),null,{default:m(()=>[...t[11]||(t[11]=[f("Payment Method",-1)])]),_:1}),e("div",ve,[(o(),c(N,null,Y(a,r=>e("div",{key:r.value,class:A(["flex items-center space-x-3 rounded-lg border p-3 cursor-pointer hover:bg-accent transition-colors",{"border-primary bg-accent":p.value===r.value}]),onClick:R=>{p.value=r.value,B()}},[ae(e("input",{type:"radio",value:r.value,"onUpdate:modelValue":t[0]||(t[0]=R=>p.value=R),id:r.value,class:"h-4 w-4 text-primary"},null,8,ye),[[se,p.value]]),n(s($),{for:r.value,class:"flex items-center gap-2 flex-1 cursor-pointer"},{default:m(()=>[(o(),w(le(r.icon),{class:"h-5 w-5"})),e("span",xe,i(r.label),1),e("span",ge,i(r.fee)+"% + â‚±15",1)]),_:2},1032,["for"])],10,fe)),64))])]),p.value==="card"?(o(),c("div",_e,[b.value&&h.savedPaymentMethod?(o(),c("div",be,[e("p",he,[n(s(I),{class:"h-4 w-4"}),f(" Using saved card ending in "+i(h.savedPaymentMethod.last_four),1)]),e("button",{type:"button",onClick:t[1]||(t[1]=r=>{b.value=!1,x.value="",l.value="",M.value="",S.value="",d.value=""}),class:"text-xs text-blue-700 dark:text-blue-300 hover:underline mt-1"}," Use a different card ")])):_("",!0),e("div",Ce,[n(s($),{for:"cardName"},{default:m(()=>[...t[12]||(t[12]=[f("Cardholder Name",-1)])]),_:1}),n(s(V),{id:"cardName",modelValue:l.value,"onUpdate:modelValue":t[2]||(t[2]=r=>l.value=r),placeholder:"JUAN DELA CRUZ",disabled:v.value||b.value},null,8,["modelValue","disabled"])]),e("div",ke,[n(s($),{for:"cardNumber"},{default:m(()=>[...t[13]||(t[13]=[f("Card Number",-1)])]),_:1}),n(s(V),{id:"cardNumber",modelValue:x.value,"onUpdate:modelValue":t[3]||(t[3]=r=>x.value=r),onInput:O,placeholder:"4343 4343 4343 4345",maxlength:"19",disabled:v.value||b.value,readonly:b.value},null,8,["modelValue","disabled","readonly"])]),e("div",Pe,[e("div",$e,[n(s($),{for:"expMonth"},{default:m(()=>[...t[14]||(t[14]=[f("Month",-1)])]),_:1}),n(s(V),{id:"expMonth",modelValue:M.value,"onUpdate:modelValue":t[4]||(t[4]=r=>M.value=r),placeholder:"MM",maxlength:"2",disabled:v.value||b.value},null,8,["modelValue","disabled"])]),e("div",we,[n(s($),{for:"expYear"},{default:m(()=>[...t[15]||(t[15]=[f("Year",-1)])]),_:1}),n(s(V),{id:"expYear",modelValue:S.value,"onUpdate:modelValue":t[5]||(t[5]=r=>S.value=r),placeholder:"YY",maxlength:"2",disabled:v.value||b.value},null,8,["modelValue","disabled"])]),e("div",Me,[n(s($),{for:"cvc"},{default:m(()=>[...t[16]||(t[16]=[f("CVC",-1)])]),_:1}),n(s(V),{id:"cvc",modelValue:d.value,"onUpdate:modelValue":t[6]||(t[6]=r=>d.value=r),placeholder:"123",maxlength:"4",type:"password",disabled:v.value},null,8,["modelValue","disabled"])])])])):(o(),c("div",Se,[e("p",Ve," You will be redirected to "+i(a.find(r=>r.value===p.value)?.label)+" to complete your payment. ",1)])),e("div",Ue,[e("div",Ne,[e("span",null,"Subscription ("+i(h.billingCycle)+")",1),e("span",null,i(U(C.value.amount)),1)]),e("div",Ae,[t[17]||(t[17]=e("span",null,"Payment Processing Fee",-1)),e("span",null,i(U(C.value.fee)),1)]),t[19]||(t[19]=e("div",{class:"h-px bg-border my-2"},null,-1)),e("div",Fe,[t[18]||(t[18]=e("span",null,"Total",-1)),e("span",null,i(U(C.value.total)),1)])]),P.value?(o(),c("div",je,[n(s(re),{class:"h-4 w-4"}),e("span",null,i(P.value),1)])):_("",!0),e("div",De,[n(s(E),{variant:"outline",class:"flex-1",onClick:t[7]||(t[7]=r=>k("update:open",!1)),disabled:v.value},{default:m(()=>[...t[20]||(t[20]=[f(" Cancel ",-1)])]),_:1},8,["disabled"]),n(s(E),{class:"flex-1",onClick:G,disabled:v.value},{default:m(()=>[v.value?(o(),w(s(de),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):_("",!0),f(" "+i(v.value?"Processing...":`Pay ${U(C.value.total)}`),1)]),_:1},8,["disabled"])]),t[21]||(t[21]=e("p",{class:"text-xs text-center text-muted-foreground"}," ðŸ”’ Secured by PayMongo. Your payment information is encrypted. ",-1))])]),_:1})]),_:1},8,["open"]))}}),Ye={class:"flex h-full flex-1 flex-col gap-4 md:gap-6 rounded-xl p-3 md:p-6"},Be={class:"text-center space-y-3 md:space-y-4"},Re={class:"flex items-center justify-center gap-1.5 md:gap-2"},Ie={class:"flex items-center justify-center gap-2 md:gap-3 mt-4 md:mt-6"},He={class:"grid md:grid-cols-3 gap-4 md:gap-6 max-w-7xl mx-auto w-full mt-4 md:mt-8"},Le={class:"space-y-1.5 md:space-y-2 mb-4 md:mb-6"},Ge={class:"text-lg md:text-2xl font-bold"},Te={class:"text-muted-foreground text-xs md:text-sm"},We={class:"mb-4 md:mb-6"},Oe={class:"flex items-baseline gap-1"},Ze={class:"text-2xl md:text-4xl font-bold"},ze={class:"text-xs md:text-sm text-muted-foreground"},Ke={key:0,class:"text-xs md:text-sm text-green-600 dark:text-green-400 mt-1"},qe={key:1,class:"text-xs md:text-sm text-primary mt-1"},Je={class:"space-y-2 md:space-y-3 mb-6 md:mb-8 flex-grow"},Xe={class:"space-y-1.5 md:space-y-2"},Qe={key:2,class:"space-y-1.5 md:space-y-2 mb-6 md:mb-8 text-xs md:text-sm text-muted-foreground"},et={key:0},tt={key:0},at={key:1},st={key:1},lt={key:0},nt={key:1},ft=L({__name:"Index",props:{plans:{},currentPlan:{},hasActiveSubscription:{type:Boolean},savedPaymentMethod:{}},setup(h){const j=h,u=g(!1),k=g(!1),p=g(null),v=d=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0,maximumFractionDigits:0}).format(d),P=d=>u.value?d.annual_price:d.price,b=d=>d.price*12-d.annual_price,x=d=>j.currentPlan?.slug===d.slug,M=d=>{d.price===0?F.post("/payment/process",{plan_slug:d.slug,billing_cycle:"monthly",payment_method:"free"}):(p.value=d,k.value=!0)},S=d=>({dashboard:"Dashboard Access",appointments:"Appointment Management",schedule_management:"Schedule Management",basic_patient_management:"Patient Management",analytics:"Analytics & Insights",history:"Appointment History",patient_records:"Patient Records",report_generation:"Report Generation",unlimited_appointments:"Unlimited Appointments",advanced_scheduling:"Advanced Scheduling",staff_management:"Staff Management",unlimited_staff:"Unlimited Staff",unlimited_services:"Unlimited Services",detailed_analytics:"Detailed Analytics",multiple_veterinarians:"Multiple Veterinarians",custom_forms:"Custom Forms",priority_listing:"Priority Listing",inventory_management:"Inventory Management",automated_reminders:"Automated Reminders",financial_reporting:"Financial Reporting",advanced_search:"Advanced Search",bulk_operations:"Bulk Operations"})[d]||d.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase());return(d,l)=>(o(),c(N,null,[n(s(z),{title:"Subscription Plans"}),n(K,null,{default:m(()=>[e("div",Ye,[e("div",Be,[e("div",Re,[n(s(ie),{class:"h-6 w-6 md:h-8 md:w-8 text-primary"}),l[4]||(l[4]=e("h1",{class:"text-xl md:text-3xl font-bold"},"Choose Your Plan",-1))]),l[6]||(l[6]=e("p",{class:"text-xs md:text-sm text-muted-foreground max-w-2xl mx-auto px-4"}," Unlock powerful features to grow your veterinary practice ",-1)),e("div",Ie,[e("button",{onClick:l[0]||(l[0]=a=>u.value=!1),class:A(["transition-colors text-xs md:text-sm",u.value?"text-muted-foreground hover:text-foreground":"font-semibold text-foreground"])}," Monthly ",2),e("button",{onClick:l[1]||(l[1]=a=>u.value=!0),class:A(["transition-colors text-xs md:text-sm",u.value?"font-semibold text-foreground":"text-muted-foreground hover:text-foreground"])}," Annual ",2),u.value?(o(),w(s(D),{key:0,variant:"secondary",class:"ml-1 md:ml-2 text-[10px] md:text-xs"},{default:m(()=>[...l[5]||(l[5]=[f(" Save up to 20% ",-1)])]),_:1})):_("",!0)])]),e("div",He,[(o(!0),c(N,null,Y(h.plans,a=>(o(),c("div",{key:a.id,class:A(["relative rounded-xl border bg-card p-4 md:p-8 shadow-sm transition-all hover:shadow-lg flex flex-col",{"ring-2 ring-primary":x(a),"border-primary":a.slug==="pro-plus"}])},[x(a)?(o(),w(s(D),{key:0,class:"absolute -top-2 md:-top-3 right-4 md:right-6 text-[10px] md:text-xs",variant:"default"},{default:m(()=>[...l[7]||(l[7]=[f(" Current Plan ",-1)])]),_:1})):_("",!0),a.slug==="pro-plus"?(o(),w(s(D),{key:1,class:"absolute -top-2 md:-top-3 left-4 md:left-6 text-[10px] md:text-xs",variant:"secondary"},{default:m(()=>[n(s(ue),{class:"h-2 w-2 md:h-3 md:w-3 mr-1"}),l[8]||(l[8]=f(" Most Popular ",-1))]),_:1})):_("",!0),e("div",Le,[e("h3",Ge,i(a.name),1),e("p",Te,i(a.description),1)]),e("div",We,[e("div",Oe,[e("span",Ze,i(v(P(a))),1),e("span",ze,"/ "+i(u.value?"year":"month"),1)]),u.value&&a.annual_price>0?(o(),c("p",Ke," Save "+i(v(b(a)))+" per year ",1)):_("",!0),a.trial_days>0?(o(),c("p",qe,i(a.trial_days)+"-day free trial ",1)):_("",!0)]),e("div",Je,[l[9]||(l[9]=e("p",{class:"text-xs md:text-sm font-medium"},"Features included:",-1)),e("ul",Xe,[(o(!0),c(N,null,Y(a.features,C=>(o(),c("li",{key:C,class:"flex items-start gap-1.5 md:gap-2 text-xs md:text-sm"},[n(s(me),{class:"h-3 w-3 md:h-4 md:w-4 text-primary mt-0.5 flex-shrink-0"}),e("span",null,i(S(C)),1)]))),128))])]),a.limits?(o(),c("div",Qe,[typeof a.limits=="object"&&a.limits.max_staff_accounts!==void 0?(o(),c("p",et,[a.limits.max_staff_accounts!==-1?(o(),c("span",tt,i(a.limits.max_staff_accounts)+" staff account"+i(a.limits.max_staff_accounts>1?"s":""),1)):(o(),c("span",at," Unlimited staff accounts "))])):_("",!0),typeof a.limits=="object"&&a.limits.max_services!==void 0?(o(),c("p",st,[a.limits.max_services!==-1?(o(),c("span",lt," Up to "+i(a.limits.max_services)+" service"+i(a.limits.max_services>1?"s":""),1)):(o(),c("span",nt," Unlimited services "))])):_("",!0)])):_("",!0),n(s(E),{class:"w-full",variant:a.slug==="pro-plus"?"default":"outline",disabled:x(a),onClick:C=>M(a)},{default:m(()=>[f(i(x(a)?"Current Plan":a.price===0?"Get Started":"Subscribe Now"),1)]),_:2},1032,["variant","disabled","onClick"])],2))),128))]),l[10]||(l[10]=e("div",{class:"text-center mt-12 text-sm text-muted-foreground max-w-2xl mx-auto"},[e("p",null,"All plans include secure hosting, regular updates, and technical support."),e("p",{class:"mt-2"},[f("Need a custom solution? "),e("a",{href:"/contact",class:"text-primary hover:underline"},"Contact us")])],-1))]),p.value?(o(),w(Ee,{key:0,open:k.value,"onUpdate:open":l[2]||(l[2]=a=>k.value=a),"plan-slug":p.value.slug,amount:u.value?p.value.annual_price:p.value.price,"billing-cycle":u.value?"annual":"monthly","public-key":d.$page.props.auth.paymongoPublicKey||"","saved-payment-method":h.savedPaymentMethod,onSuccess:l[3]||(l[3]=a=>s(F).visit("/subscription/dashboard"))},null,8,["open","plan-slug","amount","billing-cycle","public-key","saved-payment-method"])):_("",!0)]),_:1})],64))}});export{ft as default};
